---
layout: post
title:  "无线权威指南"
date:   2015-12-11 
categories: wifi
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Ch1 Overview of Wireless Standards, Organizations, and Fundamentals</a>
<ul>
<li><a href="#sec-1-1">要点记录</a>
<ul>
<li><a href="#sec-1-1-1">无线设备受管制的地方</a></li>
<li><a href="#sec-1-1-2">一些机构名称</a></li>
<li><a href="#sec-1-1-3">无线网络使用受管制的领域</a></li>
<li><a href="#sec-1-1-4">5代WiFi技术</a></li>
<li><a href="#sec-1-1-5">网络架构</a></li>
<li><a href="#sec-1-1-6">通信基础</a></li>
<li><a href="#sec-1-1-7">WiFi学习资源</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-2">Ch2 Radio Frequency Fundamentals</a>
<ul>
<li><a href="#sec-2-1">射频(Radio Frequency, RF)信号的定义</a></li>
<li><a href="#sec-2-2">射频的特征</a></li>
<li><a href="#sec-2-3">射频的行为</a></li>
</ul>
</li>
<li><a href="#sec-3">Ch3 Radio Frequency Components, Measurements, and Mathematics</a>
<ul>
<li><a href="#sec-3-1">RF通信的组件</a>
<ul>
<li><a href="#sec-3-1-1">Transmitter(发射机)</a></li>
<li><a href="#sec-3-1-2">Antenna(天线)</a></li>
<li><a href="#sec-3-1-3">Receiver(接收器)</a></li>
<li><a href="#sec-3-1-4">Intentional Radiator</a></li>
<li><a href="#sec-3-1-5">Equivalent Isotropically Radiated Power</a></li>
<li><a href="#sec-3-1-6">Units of Power and Comparison</a></li>
</ul>
</li>
<li><a href="#sec-3-2">RF Mathematics</a>
<ul>
<li><a href="#sec-3-2-1">Rule of 10s and 3s</a></li>
</ul>
</li>
<li><a href="#sec-3-3">Noise Floor</a></li>
<li><a href="#sec-3-4">信噪比(SNR)</a></li>
<li><a href="#sec-3-5">接收到的信号强度指示(RSSI)</a></li>
<li><a href="#sec-3-6">Link budget</a></li>
<li><a href="#sec-3-7">Fade margin/system operating margin</a></li>
</ul>
</li>
<li><a href="#sec-4">Ch5 IEEE 802.11 Standards</a>
<ul>
<li><a href="#sec-4-1">Original IEEE 802.11 standard</a></li>
<li><a href="#sec-4-2">IEEE 802.11-2007 ratified amendments</a>
<ul>
<li><a href="#sec-4-2-1">802.11b-1999</a></li>
<li><a href="#sec-4-2-2">802.11a-1999</a></li>
<li><a href="#sec-4-2-3">802.11g-2003</a></li>
<li><a href="#sec-4-2-4">802.11d-2001</a></li>
<li><a href="#sec-4-2-5">802.11h-2003</a></li>
<li><a href="#sec-4-2-6">802.11i-2004</a></li>
<li><a href="#sec-4-2-7">802.11j-2004</a></li>
<li><a href="#sec-4-2-8">802.11e-2005</a></li>
</ul>
</li>
<li><a href="#sec-4-3">IEEE 802.11-2012 ratified amendments</a>
<ul>
<li><a href="#sec-4-3-1">802.11r-2008</a></li>
<li><a href="#sec-4-3-2">802.11k-2008</a></li>
<li><a href="#sec-4-3-3">802.11y-2008</a></li>
<li><a href="#sec-4-3-4">802.11w-2009</a></li>
<li><a href="#sec-4-3-5">802.11n-2009</a></li>
<li><a href="#sec-4-3-6">802.11p-2010</a></li>
<li><a href="#sec-4-3-7">802.11z-2010</a></li>
<li><a href="#sec-4-3-8">802.11u-2011</a></li>
<li><a href="#sec-4-3-9">802.11v-2011</a></li>
<li><a href="#sec-4-3-10">802.11s-2011</a></li>
</ul>
</li>
<li><a href="#sec-4-4">Post-2012 ratified amendments</a>
<ul>
<li><a href="#sec-4-4-1">02.11ae-2012</a></li>
<li><a href="#sec-4-4-2">802.11aa-2012</a></li>
<li><a href="#sec-4-4-3">802.11ad-2012</a></li>
<li><a href="#sec-4-4-4">802.11ac-2013</a></li>
<li><a href="#sec-4-4-5">802.11af-2014</a></li>
</ul>
</li>
<li><a href="#sec-4-5">IEEE 802.11 draft amendments</a>
<ul>
<li><a href="#sec-4-5-1">802.11ah</a></li>
<li><a href="#sec-4-5-2">802.11ai</a></li>
<li><a href="#sec-4-5-3">802.11aj</a></li>
<li><a href="#sec-4-5-4">802.11ak</a></li>
<li><a href="#sec-4-5-5">802.11aq</a></li>
</ul>
</li>
<li><a href="#sec-4-6">Review Questions:</a></li>
</ul>
</li>
<li><a href="#sec-5">Ch6 Wireless Networks and Spread Spectrum Technologies</a>
<ul>
<li><a href="#sec-5-1">Industrial, Scientific, and Medical Bands</a></li>
<li><a href="#sec-5-2">Unlicensed National Information Infrastructure Bands</a>
<ul>
<li><a href="#sec-5-2-1">U-NII-1 (Lower Band)</a></li>
<li><a href="#sec-5-2-2">U-NII-2 (Middle Band)</a></li>
<li><a href="#sec-5-2-3">U-NII-2 Extended</a></li>
<li><a href="#sec-5-2-4">U-NII-3 (Upper Band)</a></li>
<li><a href="#sec-5-2-5">Future U-NII Bands</a></li>
</ul>
</li>
<li><a href="#sec-5-3">Narrowband and Spread Spectrum</a></li>
<li><a href="#sec-5-4">Multipath Interference</a></li>
<li><a href="#sec-5-5">Frequency Hopping Spread Spectrum</a>
<ul>
<li><a href="#sec-5-5-1">Hopping Sequence</a></li>
<li><a href="#sec-5-5-2">Dwell Time</a></li>
<li><a href="#sec-5-5-3">Hop Time</a></li>
<li><a href="#sec-5-5-4">Modulation</a></li>
</ul>
</li>
<li><a href="#sec-5-6">Direct Sequence Spread Spectrum</a>
<ul>
<li><a href="#sec-5-6-1">DSSS Data Encoding</a></li>
<li><a href="#sec-5-6-2">Modulation</a></li>
<li><a href="#sec-5-6-3">Packet Binary Convolutional Code</a></li>
<li><a href="#sec-5-6-4">Orthogonal Frequency Division Multiplexing</a></li>
</ul>
</li>
<li><a href="#sec-5-7">Throughput vs. Bandwidth</a></li>
</ul>
</li>
<li><a href="#sec-6">Ch7 Wireless LAN Topologies</a>
<ul>
<li><a href="#sec-6-1">Wireless networking topologies</a></li>
<li><a href="#sec-6-2">802.11 topologies</a></li>
<li><a href="#sec-6-3">802.11 configuration modes</a>
<ul>
<li><a href="#sec-6-3-1">Wireless wide area network (WWAN)</a></li>
<li><a href="#sec-6-3-2">Wireless Metropolitan Area Network (WMAN)</a></li>
<li><a href="#sec-6-3-3">Wireless Personal Area Network (WPAN)</a></li>
<li><a href="#sec-6-3-4">Wireless Local Area Network (WLAN)</a></li>
</ul>
</li>
<li><a href="#sec-6-4">802.11 Topologies</a>
<ul>
<li><a href="#sec-6-4-1">Access Point</a></li>
<li><a href="#sec-6-4-2">Client Station</a></li>
<li><a href="#sec-6-4-3">Integration Service</a></li>
<li><a href="#sec-6-4-4">Distribution System</a></li>
<li><a href="#sec-6-4-5">Wireless Distribution System</a></li>
<li><a href="#sec-6-4-6">Service Set Identifier</a></li>
<li><a href="#sec-6-4-7">Basic Service Set</a></li>
<li><a href="#sec-6-4-8">Basic Service Set Identifier</a></li>
<li><a href="#sec-6-4-9">Basic Service Area</a></li>
<li><a href="#sec-6-4-10">Extended Service Set</a></li>
<li><a href="#sec-6-4-11">Independent Basic Service Set</a></li>
<li><a href="#sec-6-4-12">Mesh Basic Service Set</a></li>
<li><a href="#sec-6-4-13">QoS Basic Service Set</a></li>
</ul>
</li>
<li><a href="#sec-6-5">802.11 Configuration Modes</a>
<ul>
<li><a href="#sec-6-5-1">Access Point Modes</a></li>
<li><a href="#sec-6-5-2">Client Station Modes</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-7">Ch8 802.11 Medium Access</a>
<ul>
<li><a href="#sec-7-1">CSMA/CA vs. CSMA/CD</a></li>
<li><a href="#sec-7-2">Collision Detection</a></li>
<li><a href="#sec-7-3">Distributed Coordination Function</a>
<ul>
<li><a href="#sec-7-3-1">Interframe Space (IFS)</a></li>
<li><a href="#sec-7-3-2">Duration/ID Field</a></li>
<li><a href="#sec-7-3-3">Carrier Sense</a></li>
<li><a href="#sec-7-3-4">Random Backoff Timer</a></li>
</ul>
</li>
<li><a href="#sec-7-4">Point Coordination Function</a></li>
<li><a href="#sec-7-5">Hybrid Coordination Function</a></li>
<li><a href="#sec-7-6">Block Acknowledgment</a></li>
<li><a href="#sec-7-7">Wi-Fi Multimedia</a></li>
<li><a href="#sec-7-8">Airtime Fairness</a></li>
</ul>
</li>
<li><a href="#sec-8">Ch9 802.11 MAC Architecture</a>
<ul>
<li><a href="#sec-8-1">Data-Link Layer</a>
<ul>
<li><a href="#sec-8-1-1">MAC Service Data Unit</a></li>
<li><a href="#sec-8-1-2">MAC Protocol Data Unit</a></li>
</ul>
</li>
<li><a href="#sec-8-2">Physical Layer</a>
<ul>
<li><a href="#sec-8-2-1">PLCP Service Data Unit</a></li>
<li><a href="#sec-8-2-2">PLCP Protocol Data Unit</a></li>
</ul>
</li>
<li><a href="#sec-8-3">802.11 and 802.3 Interoperability</a></li>
<li><a href="#sec-8-4">Three 802.11 Frame Types</a>
<ul>
<li><a href="#sec-8-4-1">Management Frames</a></li>
<li><a href="#sec-8-4-2">Control Frames</a></li>
<li><a href="#sec-8-4-3">Data Frames</a></li>
</ul>
</li>
<li><a href="#sec-8-5">Beacon Management Frame</a></li>
<li><a href="#sec-8-6">Authentication</a></li>
<li><a href="#sec-8-7">Association</a>
<ul>
<li><a href="#sec-8-7-1">Authentication and Association States</a></li>
<li><a href="#sec-8-7-2">Basic and Supported Rates</a></li>
<li><a href="#sec-8-7-3">Roaming</a></li>
<li><a href="#sec-8-7-4">Reassociation</a></li>
<li><a href="#sec-8-7-5">Disassociation</a></li>
<li><a href="#sec-8-7-6">Deauthentication</a></li>
</ul>
</li>
<li><a href="#sec-8-8">ACK Frame</a></li>
<li><a href="#sec-8-9">Fragmentation</a></li>
<li><a href="#sec-8-10">Protection Mechanism</a>
<ul>
<li><a href="#sec-8-10-1">RTS/CTS</a></li>
<li><a href="#sec-8-10-2">CTS-to-Self</a></li>
</ul>
</li>
<li><a href="#sec-8-11">Data Frames</a></li>
<li><a href="#sec-8-12">Power Management</a>
<ul>
<li><a href="#sec-8-12-1">Active Mode</a></li>
<li><a href="#sec-8-12-2">Power Save Mode</a></li>
<li><a href="#sec-8-12-3">Traffic Indication Map</a></li>
<li><a href="#sec-8-12-4">Delivery Traffic Indication Message</a></li>
<li><a href="#sec-8-12-5">Announcement Traffic Indication Message</a></li>
<li><a href="#sec-8-12-6">WMM Power Save and U-APSD</a></li>
<li><a href="#sec-8-12-7">802.11n Power Management</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-9">Ch10 WLAN Architecture</a></li>
<li><a href="#sec-10">Ch11 WLAN Deployment and Vertical Markets</a></li>
<li><a href="#sec-11">Ch12 WLAN Troubleshooting and Design</a></li>
<li><a href="#sec-12">Ch13 802.11 Network Security Arch itecture</a>
<ul>
<li><a href="#sec-12-1">802.11 security basics</a>
<ul>
<li><a href="#sec-12-1-1">Data privacy and integrity</a></li>
<li><a href="#sec-12-1-2">Authentication, authorization, and accounting (AAA)</a></li>
<li><a href="#sec-12-1-3">Segmentation</a></li>
<li><a href="#sec-12-1-4">Monitoring and policy</a></li>
</ul>
</li>
<li><a href="#sec-12-2">Legacy 802.11 security</a>
<ul>
<li><a href="#sec-12-2-1">Legacy authentication</a></li>
<li><a href="#sec-12-2-2">Static WEP encryption</a></li>
<li><a href="#sec-12-2-3">MAC filters</a></li>
<li><a href="#sec-12-2-4">SSID cloaking(隐藏SSID)</a></li>
</ul>
</li>
<li><a href="#sec-12-3">Robust security</a>
<ul>
<li><a href="#sec-12-3-1">Robust security network (RSN)</a></li>
<li><a href="#sec-12-3-2">Authentication and authorization</a></li>
<li><a href="#sec-12-3-3">PSK authentication</a></li>
<li><a href="#sec-12-3-4">Proprietary PSK authentication</a></li>
<li><a href="#sec-12-3-5">802.1X/EAP framework</a></li>
<li><a href="#sec-12-3-6">Dynamic encryption-key generation</a></li>
<li><a href="#sec-12-3-7">4-Way Handshake</a></li>
<li><a href="#sec-12-3-8">WPA/WPA2-Personal</a></li>
<li><a href="#sec-12-3-9">TKIP encryption</a></li>
<li><a href="#sec-12-3-10">CCMP encryption</a></li>
</ul>
</li>
<li><a href="#sec-12-4">Traffic segmentation</a>
<ul>
<li><a href="#sec-12-4-1">VLANs</a></li>
<li><a href="#sec-12-4-2">RBAC</a></li>
</ul>
</li>
<li><a href="#sec-12-5">Infrastructure security</a>
<ul>
<li><a href="#sec-12-5-1">Physical security</a></li>
<li><a href="#sec-12-5-2">Interface security</a></li>
</ul>
</li>
<li><a href="#sec-12-6">VPN wireless security</a>
<ul>
<li><a href="#sec-12-6-1">Layer 3 VPNs</a></li>
<li><a href="#sec-12-6-2">SSL VPN</a></li>
<li><a href="#sec-12-6-3">VPN deployment</a></li>
<li><a href="#sec-12-6-4">Guest WLAN security</a></li>
<li><a href="#sec-12-6-5">Captive portal</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-13">Ch14 Wireless Attacks, Intrusion Monitoring, and Policy</a></li>
<li><a href="#sec-14">Ch15 Radio Frequency Site Survey Fundamentals</a></li>
<li><a href="#sec-15">Ch16 Site Survey Systems and Devices</a></li>
<li><a href="#sec-16">Ch17 Power over Ethernet(PoE)</a></li>
<li><a href="#sec-17">Ch18 802.11n</a>
<ul>
<li><a href="#sec-17-1">802.11n-2009 amendment</a></li>
<li><a href="#sec-17-2">Wi-Fi Alliance certification</a></li>
<li><a href="#sec-17-3">MIMO</a>
<ul>
<li><a href="#sec-17-3-1">Radio chains</a></li>
<li><a href="#sec-17-3-2">Spatial multiplexing (SM)</a></li>
<li><a href="#sec-17-3-3">MIMO diversity</a></li>
<li><a href="#sec-17-3-4">Space-time block coding (STBC)</a></li>
<li><a href="#sec-17-3-5">Cyclic shift diversity (CSD)</a></li>
<li><a href="#sec-17-3-6">Transmit beamforming (TxBF)</a></li>
</ul>
</li>
<li><a href="#sec-17-4">HT channels</a>
<ul>
<li><a href="#sec-17-4-1">20 MHz non-HT and HT channels</a></li>
<li><a href="#sec-17-4-2">40 MHz channels</a></li>
<li><a href="#sec-17-4-3">40 MHz Intolerant</a></li>
<li><a href="#sec-17-4-4">Guard interval (GI)</a></li>
<li><a href="#sec-17-4-5">Modulation and coding scheme (MCS)</a></li>
<li><a href="#sec-17-4-6">HT PHY</a></li>
<li><a href="#sec-17-4-7">Non-HT legacy</a></li>
<li><a href="#sec-17-4-8">HT Mixed</a></li>
<li><a href="#sec-17-4-9">HT Greenfield</a></li>
</ul>
</li>
<li><a href="#sec-17-5">HT MAC</a>
<ul>
<li><a href="#sec-17-5-1">A-MSDU</a></li>
<li><a href="#sec-17-5-2">A-MPDU</a></li>
<li><a href="#sec-17-5-3">Block Acknowledgment</a></li>
<li><a href="#sec-17-5-4">RIFS</a></li>
<li><a href="#sec-17-5-5">HT power management</a></li>
</ul>
</li>
<li><a href="#sec-17-6">HT operation</a>
<ul>
<li><a href="#sec-17-6-1">20/40 channel operation</a></li>
<li><a href="#sec-17-6-2">HT protection modes (0–3)</a></li>
<li><a href="#sec-17-6-3">RTS/CTS and CTS-to-self</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#sec-18">Ch19 Very High Throughput (VHT) and 802.11ac</a></li>
<li><a href="#sec-19">Bring Your Own Device (BYOD)</a></li>
</ul>
</div>
</div>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">Ch1 Overview of Wireless Standards, Organizations, and Fundamentals</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">要点记录</h3>
<div class="outline-text-3" id="text-1-1">
</div><div id="outline-container-sec-1-1-1" class="outline-4">
<h4 id="sec-1-1-1">无线设备受管制的地方</h4>
<div class="outline-text-4" id="text-1-1-1">
<ol class="org-ol">
<li>频率
</li>
<li>功率
</li>
<li>传输方式
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-1-1-2" class="outline-4">
<h4 id="sec-1-1-2">一些机构名称</h4>
<div class="outline-text-4" id="text-1-1-2">
<ul class="org-ul">
<li>IEEE

<p>
制定标准，确保不同厂商设备之间的兼容性和互操作性
</p>
</li>

<li>IETF(Internet Engineering Task Force)

<p>
制定RFC文档，其中许多也成为了无线网络和安全方面的国际标准。
</p>
</li>

<li>WiFi Alliance

<p>
负责执行Wi-Fi产品的认证测试。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-1-3" class="outline-4">
<h4 id="sec-1-1-3">无线网络使用受管制的领域</h4>
<div class="outline-text-4" id="text-1-1-3">
<ul class="org-ul">
<li>频率
</li>
<li>带宽
</li>
<li>IR（Intentional Radiator)的最大功率
</li>
<li>等效全向辐射功率的最大值
</li>
<li>使用于室内还是室外
</li>
<li>频谱共享规则
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-1-4" class="outline-4">
<h4 id="sec-1-1-4">5代WiFi技术</h4>
<div class="outline-text-4" id="text-1-1-4">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Wi-Fi技术</th>
<th scope="col" class="left">频段</th>
<th scope="col" class="left">最大速率传输率</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">802.11a</td>
<td class="left">5 GHz</td>
<td class="left">54 Mbps</td>
</tr>

<tr>
<td class="left">802.11b</td>
<td class="left">2.4 GHz</td>
<td class="left">11 Mbps</td>
</tr>

<tr>
<td class="left">802.11g</td>
<td class="left">2.4 GHz</td>
<td class="left">54 Mbps</td>
</tr>

<tr>
<td class="left">802.11n</td>
<td class="left">2.4 GHz, 5GHz</td>
<td class="left">450 Mbps</td>
</tr>

<tr>
<td class="left">802.11ac</td>
<td class="left">5 GHz</td>
<td class="left">1.3 Gbps</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-1-1-5" class="outline-4">
<h4 id="sec-1-1-5">网络架构</h4>
<div class="outline-text-4" id="text-1-1-5">
<ul class="org-ul">
<li>Core Layer

<p>
本层不对数据包进行路由或操作，只执行高速交换， 确保数据包快速和
可靠传输。
</p>
</li>

<li>Distribution Layer

<p>
本层将数据传输路由到不同的虚拟LAN和子网之间。
</p>
</li>

<li>Access Layer

<p>
负责将数据最终传递给用户。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-1-6" class="outline-4">
<h4 id="sec-1-1-6">通信基础</h4>
<div class="outline-text-4" id="text-1-1-6">
<ul class="org-ul">
<li>载波信号

<p>
一个信号如果要传递有效信息，必须要对其进行调整，使其能分辨出0，1
信息，对信号进行调整的方法称为调制（Modulation).对一个信号波的振幅，
频率和相位进行调整可以产生一个载波信号。
</p>
</li>

<li>信号调制技术
<ol class="org-ol">
<li>ASK

<p>
通过振幅的变化来携带数据信息，最容易受干扰的影响。
</p>
</li>

<li>FSK

<p>
通过频率的变化来携带数据信息。
</p>
</li>

<li>PSK

<p>
通过相位的变化来携带数据信息，802.11网络中使用此调制技术比较
广泛。
</p>
</li>
</ol>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-1-1-7" class="outline-4">
<h4 id="sec-1-1-7">WiFi学习资源</h4>
<div class="outline-text-4" id="text-1-1-7">
<ul class="org-ul">
<li><i>WiFi联盟</i>
</li>
<li><i>CWNP</i>
</li>
<li><a href="http://www.revolutionwifi.net/">Andrew vonNagy's blog</a>
</li>
<li>iGoogle Group: WiFi
</li>
</ul>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">Ch2 Radio Frequency Fundamentals</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1">射频(Radio Frequency, RF)信号的定义</h3>
<div class="outline-text-3" id="text-2-1">
<p>
物理层的核心是射频传输。
</p>

<p>
射频信号刚开始是由信号发送器产生的一种交流电信号，这种交流电信号通
过铜导线（同轴线缆），以电磁波的形式通过天线发射出去。
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2">射频的特征</h3>
<div class="outline-text-3" id="text-2-2">
<p>
每个射频信号具备如下几个特征：
</p>

<ul class="org-ul">
<li>波长

<p>
射频信号一个周期传输的距离。
</p>

<p>
一般人认为更高频率的电磁波信号，波长更小，信号衰减速度比低频率，波长
较长的电磁波要快。而实际上，RF信号的频率和波长属性并不会导致信号
衰减，而距离才是导致信号衰减的主要原因。 
</p>

<p>
所有天线都有一个接收功率的有效区域，称为孔径(apertune), 更高频率
的天线接收较低频率的信号所需要要的RF能量要小些。
</p>

<p>
尽量波长和频率不会造成衰减，但给人的感觉就是较小波长的高频率信号
比较短波长的低频率信号衰减更快。所以，当无线链路其他情况一样的条
件下，使用5G无线电波的Wi-Fi设备会比使用2.4G无线电波的设备拥有较小
的传输距离和较小的覆盖范围。
</p>

<p>
Site Survey: 测试设备的信号覆盖范围的一个过程。
</p>
</li>

<li>频率

<p>
一个RF信号一秒钟出现的周期次数即为信号的频率，单位Hz。波长与频率
成反比。
</p>
</li>

<li>振幅

<p>
RF信号的一个非常重要的属性，可描述为信号的强度。振幅会由于信号的
衰减而变化，但是信号的波长和频率却是保持不变的。
</p>
</li>

<li>相位

<p>
一般是用于描述信号之间的关系。
</p>
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3">射频的行为</h3>
<div class="outline-text-3" id="text-2-3">
<ul class="org-ul">
<li>波传播(Wave propagation)

<p>
RF信号传输的过程，即远离发送方天线的过程。
</p>
</li>

<li>吸收(Absorption)

<p>
RF最常见的行为是吸收。如果一个信号并没有从一个物体中反射回来，而
是通过了该物体，则认为发生了100%的信号吸收。
</p>

<p>
不同材料的物体对信号的吸收情况不一样。砖和混凝土结构的墙面会吸收
相当多的信号，而干燥的墙面则会相对吸收少些信号。比如2.4G信号通过
一个砖墙后，还剩下1/16的信号强度，但是如果通过普通的墙面，则仅损
失大概1/2的信号强度。水也是一种媒介，会吸收大部分信号。
</p>
</li>

<li>反射(Reflection)

<p>
当一个无线电波碰到一个比它大的光滑的物体时，电磁波会反转到另一个
方向传播，这种行为称为反射。一般金属制造的物体都会反射电磁波。
</p>

<p>
当反射的信号与原始信号会产生传输的时间差，即deplay spread，会导致
intersymbol干涉，从而导致数据被破坏以及Layer 2数据重传。
</p>

<p>
反射是802.11a/b/g WLAN无线设备性能差的一个主要原因之一。因为反射
会产生多径效应，多径效应会降低接收到的信号的强度和质量，甚至会导
致数据破坏或信号归零。
</p>

<p>
802.11n和802.11ac无线电波利用了MIMO天线阵列和高级的信号处理技术，
可以利用多径效应，发掘出它的优势，并应用在数据传输上。
</p>
</li>

<li>散射(Scattering)

<p>
百度百科：散射是指由传播介质的不均匀性引起的光线向四周射去的现象。
如一束光通过稀释后的牛奶后为粉红色，而从侧面和上面看，却是浅蓝色
的。
</p>
</li>

<li>折射(Refraction)

<p>
当一个RF信号通过不同密度的媒介时，会导致电波波的方向发生改变，这
种现象称为折射。折射一般是由于大气条件产生的。
</p>

<p>
三种最常见的折射原因为：水蒸气，空气温度的变化以及空气压力的变化。
</p>
</li>

<li>衍射(Diffraction)

<p>
衍射是指信号经过一个障碍物体时，传播路径发生了变化，没有碰到障碍
物的其他电波仍然保持原来的传播路径和方向。 衍射现象会导致在障碍物
的背面产生一个区域称为RF阴影区，这块区域要么完全收不到电波信号，
要么只能收到比较弱的电波信号。
</p>
</li>

<li>衰减(Loss (attenuation))

<p>
指信号强度或振幅降低了。在无线通信过程的有线部分，即RF线缆，AC电
流信号会损失强度，因为同轴线缆和其他连接器件有电子阻抗。
</p>
</li>

<li>自由空间路径损耗(Free space path loss)

<p>
即便排除上述的一些因素，根据物理定律，一个无线电波在向因周传播过
程中，随着距离越来越远，信号强度也会越来越弱，直到接收器无法感知
到该信号的存在。
</p>
</li>

<li>多径(Multipath)

<p>
由于上述存在的反射，散射，折射，衍射等现象，会导致相同的信号存在
多条传输路径。
</p>
</li>

<li>增益(Gain (amplification))

<p>
加大信号的振幅或信号强度。有两种类型的增益：主动增益和被动增益。
</p>

<p>
收发器和RF放大器是主动增益设备，而天线是被增益设备。
</p>
</li>
</ul>
</div>
</div>
</div>


<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">Ch3 Radio Frequency Components, Measurements, and Mathematics</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1">RF通信的组件</h3>
<div class="outline-text-3" id="text-3-1">
<p>
data send path:
Transmitter &#x2013;&gt; Antenna Cable &#x2013;&gt; Intentional radiator(IR) &#x2013;&gt; EIRP
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120202.png" alt="2015120202.png" />
</p>
<p><span class="figure-number">Figure 1:</span> RF components</p>
</div>
</div>

<div id="outline-container-sec-3-1-1" class="outline-4">
<h4 id="sec-3-1-1">Transmitter(发射机)</h4>
<div class="outline-text-4" id="text-3-1-1">
<p>
The transmitter is the initial component in the creation of the
wireless medium. The computer hands the data off to the
transmitter, and it is the transmitter’s job to begin the RF
communication.
</p>

<p>
The transmitter takes the data provided and modifies the AC
signal by using a modulation technique to encode the data into the
signal.
</p>

<p>
被调制后的AC信号现在已经变成一个载波信号，包含（承载）了要传输的数
据。载波信号接着被直接传输到天线或通过线缆传输到天线。
</p>

<p>
总结来看，Transmitter的主要作用是：
</p>
<ol class="org-ol">
<li>产生某个特定频率的信号。
</li>
<li>决定原始信号的振幅，或者说是Transmitter的功率级别，信号波的振幅
越大，Transmitter所需要的功率就越大。当然，这个功率要受到管理当
局的管制。
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-3-1-2" class="outline-4">
<h4 id="sec-3-1-2">Antenna(天线)</h4>
<div class="outline-text-4" id="text-3-1-2">
<p>
天线提供了两个功能：
</p>
<ol class="org-ol">
<li>When connected to the transmitter, it collects the AC signal
that it receives from the transmitter and directs, or radiates,
the RF waves away from the antenna in a pattern specific to
the antenna type.
</li>

<li>When connected to the receiver, the antenna takes the RF waves
that it receives through the air and directs the AC signal to
the receiver.

<p>
接收方将收到的AC Signal转换成比特和字节。
</p>
</li>
</ol>

<p>
isotropic radiator: 全方向等同辐射器，即在各个方向发射信号的强度是
等同的。太阳是一个很好的例子。但是，生产出完成符合isotropic
radiator要求的天线是有困难的，所以天线本身的结构也会影响各个方向上
的信号传输。一般来说，有两种方法来增加天线的输出功率：
</p>
<ol class="org-ol">
<li>在Transmitter端使用更强的功率去产生信号。
</li>
<li>使天线将信号聚集于某个方向会范围输出。
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-3-1-3" class="outline-4">
<h4 id="sec-3-1-3">Receiver(接收器)</h4>
<div class="outline-text-4" id="text-3-1-3">
<p>
The receiver is the fi nal component in the wireless medium.The
receiver takes the carrier signal that is received from the
antenna and translates the modulated signals into 1s and 0s.
</p>
</div>
</div>

<div id="outline-container-sec-3-1-4" class="outline-4">
<h4 id="sec-3-1-4">Intentional Radiator</h4>
<div class="outline-text-4" id="text-3-1-4">
<p>
定义： a device that intentionally generates and emits radio
frequency energy by radiation or induction.
</p>

<p>
根据定义描述，这是一种专门设计用来产生RF的装置，它包含了：
</p>
<ol class="org-ol">
<li>transmitter
</li>
<li>all cables and connector
</li>
<li>any other equipment(grounding, lighting arrestors, amplifiers,
attenuators and so forth)
</li>
</ol>

<p>
IR的功率量测点是在提供给天线输入的连接点处。功率大小一般用mW或
dBm(decibels relative to 1 milliwatt，伏特分贝)来表示。
</p>
</div>
</div>

<div id="outline-container-sec-3-1-5" class="outline-4">
<h4 id="sec-3-1-5">Equivalent Isotropically Radiated Power</h4>
<div class="outline-text-4" id="text-3-1-5">
<p>
Equivalent isotropically radiated power (EIRP) is the highest RF
signal strength that is transmitted from a particular antenna.
</p>

<p>
一般天线具备定向或聚集从IF传过来的RF信号能量的功能，EIRRP是从天线
输出的一个功率，它可以放大输入进来的RF信号，所以EIRP的输出功率也是
受到管制的一个指标。
</p>
</div>
</div>

<div id="outline-container-sec-3-1-6" class="outline-4">
<h4 id="sec-3-1-6">Units of Power and Comparison</h4>
<div class="outline-text-4" id="text-3-1-6">
</div><ul class="org-ul"><li><a id="sec-3-1-6-1" name="sec-3-1-6-1"></a>Units of power (absolute)<br  /><div class="outline-text-5" id="text-3-1-6-1">
<ol class="org-ol">
<li>watt (W)
</li>
<li>milliwatt (mW)
</li>
<li>decibels relative to 1 milliwatt (dBm)
当功率为1 mW时，dBm值为0。
dBm = 10 X log10(PmW)
所以，100mW功率相当于+20 dBm。
大部分802.11无线电波的信号功率为1mW到100mW，由于信号传播过程中
的损耗，收到的信号功率一般低于1mW，-40dBm已经是收到的比较强的
信号了。
</li>
</ol>
</div>
</li>


<li><a id="sec-3-1-6-2" name="sec-3-1-6-2"></a>Units of comparison (relative)<br  /><div class="outline-text-5" id="text-3-1-6-2">
<ol class="org-ol">
<li>decibel (dB)  描述功率的改变
</li>
<li>decibels relative to an isotropic radiator (dBi)  一般用来衡量
天线增益, 即天线的信号相对输出强度。
</li>
<li>decibels relative to a half-wave dipole antenna(偶极天线) (dBd)
a dBd value is the increase in gain of an antenna when it is
compared to the signal of a dipole antenna.

<p>
A standard dipole antenna has a dBi value of 2.14. If an
antenna has a value of 3 dBd, this means that it is 3 dB
greater than a dipole antenna.
</p>

<p>
3 dBd = 2.14 dBi + 3 = 5.14 dBi
</p>
</li>
</ol>

<p>
Remember the 6 dB rule: +6 dB doubles the distance of the usable
signal;–6 dB halves the distance of the usable signal.
</p>
</div>
</li></ul>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2">RF Mathematics</h3>
<div class="outline-text-3" id="text-3-2">
</div><div id="outline-container-sec-3-2-1" class="outline-4">
<h4 id="sec-3-2-1">Rule of 10s and 3s</h4>
<div class="outline-text-4" id="text-3-2-1">
<ul class="org-ul">
<li>For every 3 dB of gain (relative), double the absolute power
(mW).
3 dB gain = mW * 2
</li>
<li>For every 3 dB of loss (relative), halve the absolute power
(mW).
3 dB loss = mW / 2
</li>
<li>For every 10 dB of gain (relative), multiply the absolute power
(mW) by a factor of 10.
10 dB gain = mW * 10
</li>
<li>For every 10 dB of loss (relative), divide the absolute power
(mW) by a factor of 10.
10 dB loss = mW / 10
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-3-3" class="outline-3">
<h3 id="sec-3-3">Noise Floor</h3>
<div class="outline-text-3" id="text-3-3">
<p>
背景干扰信号， 来源很多，比如：附近802.11设备传输的信号，未调制过的
来自其他类型设备的干扰波等。背景干扰信号的振幅随着环境的不同，也不
一样。在2.4 G ISM信道，背景干扰信号强度可能为-100dBm，然后，在RF环
境下，背景干扰信号强度可能为-90dBm。一般情况下，5G信道干扰信号强度
要小些，因为5G 频段相对没有2.4G寻到拥挤。
</p>
</div>
</div>

<div id="outline-container-sec-3-4" class="outline-3">
<h3 id="sec-3-4">信噪比(SNR)</h3>
<div class="outline-text-3" id="text-3-4">
<p>
SNR是衡量信号质量的一个指标。SNR是接收到的信号强度与背景干扰信号强
度之间的差值，不是比率。例如，无线设备接收到的信号强度为-85dBm，而
背景干扰信号的强度为-100dBm，则SNR值为15dB。
</p>

<p>
SNR值大于或等于25 dB时，则认为信号质量很好，而当SNR低于10 dB时，则
认为信号质量很差。 
</p>
</div>
</div>

<div id="outline-container-sec-3-5" class="outline-3">
<h3 id="sec-3-5">接收到的信号强度指示(RSSI)</h3>
<div class="outline-text-3" id="text-3-5">
<p>
Receive sensitivity: the power level of an RF signal required to be
successfully received by the receiver radio.
</p>

<p>
在Wlan设置中，Receive Sensitivity通常被定义为网络速度的一个功能。
Wi-Fi厂商一般指定各种速率下Receive Sensitity阀值。对于一个接收器来
说，要支持更高速度，就需要更多的功率。不同的速率采用不同的信号调制
技术和编码方法。更高速率下的编码方法更容易出现数据被破坏。
</p>

<p>
The 802.11-2012 standard defines the received signal strength
indicator (RSSI) as a relative metric used by 802.11 radios to
measure signal strength (amplitude). The 802.11 RSSI measurement
parameter can have a value from 0 to 255. The RSSI value is
designed to be used by the WLAN hardware manufacturer as a relative
measurement of the RF signal strength that is received by an 802.11
radio. RSSI metrics are typically mapped to receive sensitivity
thresholds expressed in absolute dBm values.
</p>

<p>
Received signal strength indicator (RSSI) metrics (vendor example)
</p>
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">


<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">RSSI</th>
<th scope="col" class="left">Receive sensitivity threshold</th>
<th scope="col" class="left">Signal strength (%)</th>
<th scope="col" class="left">Signal-to-noise ratio</th>
<th scope="col" class="left">Signal quality (%)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">30</td>
<td class="left">–30                            dBm</td>
<td class="left">100%</td>
<td class="left">70  dB</td>
<td class="left">100%</td>
</tr>

<tr>
<td class="left">25</td>
<td class="left">–41                            dBm</td>
<td class="left">90%</td>
<td class="left">60  dB</td>
<td class="left">100%</td>
</tr>

<tr>
<td class="left">20</td>
<td class="left">–52                            dBm</td>
<td class="left">80%</td>
<td class="left">43  dB</td>
<td class="left">90%</td>
</tr>

<tr>
<td class="left">21</td>
<td class="left">–52                            dBm</td>
<td class="left">80%</td>
<td class="left">40  dB</td>
<td class="left">80%</td>
</tr>

<tr>
<td class="left">15</td>
<td class="left">–63                            dBm</td>
<td class="left">60%</td>
<td class="left">33  dB</td>
<td class="left">50%</td>
</tr>

<tr>
<td class="left">10</td>
<td class="left">–75                            dBm</td>
<td class="left">40%</td>
<td class="left">25  dB</td>
<td class="left">35%</td>
</tr>

<tr>
<td class="left">5</td>
<td class="left">–89                            dBm</td>
<td class="left">10%</td>
<td class="left">10  dB</td>
<td class="left">5%</td>
</tr>

<tr>
<td class="left">0</td>
<td class="left">–110                           dBm</td>
<td class="left">0%</td>
<td class="left">0  dB</td>
<td class="left">0%</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-sec-3-6" class="outline-3">
<h3 id="sec-3-6">Link budget</h3>
<div class="outline-text-3" id="text-3-6">
<p>
When radio communications are deployed, a link budget is the sum of
all the planned and expected gains and losses from the transmitting
radio, through the RF medium, to the receiver radio.
</p>

<p>
The purpose of link budget calculations is to guarantee that the
final received signal amplitude is above the receiver sensitivity
threshold of the receiver radio.
</p>
</div>
</div>

<div id="outline-container-sec-3-7" class="outline-3">
<h3 id="sec-3-7">Fade margin/system operating margin</h3>
<div class="outline-text-3" id="text-3-7">
<p>
Fade margin is a level of desired signal above what is required. 
如果一个接收器的Receive Sensitity是-80 dBm，即只要接收到的信号强度
大于-80 dBm，则数据传输就能成功。但问题是，由于信号传输过程中，会受
到一些外部干扰导致接收到的信号强度出现波动，为了应对这种波动的特点，
通常会规划Receive Sensitity值以上的10 dB到25 dB大小的缓冲区值区间，
这个区间值就是Fade Margin。对于Fade Margin为10 dB的情况，这时设定的
Receive Sensitity的阀值为-70 dBm。
</p>
</div>
</div>
</div>


<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">Ch5 IEEE 802.11 Standards</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1">Original IEEE 802.11 standard</h3>
<div class="outline-text-3" id="text-4-1">
<p>
发布于1997年，称为IEEE Std 802.11-1997. 只定义和规范802.11设备物
理层和MAC的数据链路子层的行为。
</p>

<p>
PHY任务组定义了如下三个最初的物理层规范：
</p>
<ol class="org-ol">
<li>Infrared (IR)  经外线，一种基于光的媒介。
</li>
<li>Frequency Hopping Spread Spectrum (FHSS)  

<p>
无线频率信号通常分为窄波或护频信号。 当RF信号以比所需要带宽要
宽的带宽传输数据时，该信号就可以认为是扩频信号。 ISM 2.402 GHz
~ 2.480 GHz
</p>
</li>
<li>Direct Sequence Spread Spectrum (DSSS)

<p>
使用固定信道的一种扩频技术。 ISM 2.4 GHz ~ 2.4835 GHz
</p>
</li>
</ol>

<p>
it is important to understand that an 802.11 DSSS (Clause 16)
radio cannot communicate with an 802.11 FHSS (Clause 14) radio.
</p>

<p>
Date Rates: 1 ~ 2M bps ,  a data rate is the speed and not actual
throughput.
</p>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2">IEEE 802.11-2007 ratified amendments</h3>
<div class="outline-text-3" id="text-4-2">
</div><div id="outline-container-sec-4-2-1" class="outline-4">
<h4 id="sec-4-2-1">802.11b-1999</h4>
<div class="outline-text-4" id="text-4-2-1">
<ol class="org-ol">
<li>Clause 17 of the 802.11-2012 standard.
</li>
<li>The Physical layer medium is High-Rate DSSS (HR-DSSS)
</li>
<li>Frequency Space: 2.4 GHz to 2.4835 GHz ISM band.
</li>
<li>为了2.4G提高数据传输率，使用了不同的扩频和编码技术：CCK（Complementary Code Keying）。
</li>
<li>支持1， 2， 5.5， 11Mbps的速率。
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-2-2" class="outline-4">
<h4 id="sec-4-2-2">802.11a-1999</h4>
<div class="outline-text-4" id="text-4-2-2">
<ol class="org-ol">
<li>operate in 5GHz Frequency, using an RF technology called
Orthogonal Frequency Division Multiplexing (OFDM).
</li>
<li>支持6, 9, 12, 18, 24, 36, 48, 54速率。
</li>
<li>不能与legacy802.11设备，802.11b, 802.11g的设备。
</li>
<li>802.11a can coexist in the same physical space with 802.11,
802.11b, or 802.11g devices because these devices transmit
in separate frequency ranges.
</li>
<li>802.11a最初是想运行于三个不同的100MHz未受控的5G频段，这些频
段称为Unlicensed National Information Infrastructure
(U-NII)， 即U-NII-1, U-NII-2, U-NII-3. 
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-2-3" class="outline-4">
<h4 id="sec-4-2-3">802.11g-2003</h4>
<div class="outline-text-4" id="text-4-2-3">
<ol class="org-ol">
<li>use new technology called Extended Rate Physical(ERP).
</li>
<li>传输频段：2.4GHz ~ 2.4835GHz.
</li>
<li>与前代产品保持兼容。 
</li>
</ol>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 1:</span> Original 802.11 amendments comparison</caption>

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="left">802.11 legacy</th>
<th scope="col" class="left">802.11b</th>
<th scope="col" class="left">802.11g</th>
<th scope="col" class="left">802.11a</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">Frequency</td>
<td class="left">2.4 GHz ISM band</td>
<td class="left">2.4 GHz ISM band</td>
<td class="left">2.4 GHz ISM band</td>
<td class="left">5 GHz U-NII-1, U-NII-2, and U-NII-3 bands</td>
</tr>

<tr>
<td class="left">Spread spectrum technology</td>
<td class="left">FHSS or DSSS</td>
<td class="left">HR-DSSS   PBCC is optional.</td>
<td class="left">ERP: ERP-OFDM and ERP-DSSS/CCK are mandatory. ERP-PBCC and DSSSOFDM are optional.</td>
<td class="left">OFDM</td>
</tr>

<tr>
<td class="left">Data rates</td>
<td class="left">1, 2 Mbps</td>
<td class="left">DSSS: 1, 2 Mbps HR-DSSS: 5.5 and 11 Mbps</td>
<td class="left">ERP-DSSS/CCK: 1, 2, 5.5, and 11 Mbps   ERP-OFDM: 6, 12, and 24 Mbps are mandatory.  Also supported are 9, 18, 36, 48, and 54 Mbps. ERP-PBCC: 22 and 33 Mbps</td>
<td class="left">6, 12, and 24 Mbps are mandatory.   Also supported are 9, 18, 36, 48, and 54 Mbps.</td>
</tr>

<tr>
<td class="left">Backward compatibility</td>
<td class="left">N/A</td>
<td class="left">802.11 DSSS only</td>
<td class="left">802.11b HR-DSSS and  802.11 DSSS</td>
<td class="left">None</td>
</tr>

<tr>
<td class="left">Ratified</td>
<td class="left">1997</td>
<td class="left">1999</td>
<td class="left">2003</td>
<td class="left">1999</td>
</tr>
</tbody>
</table>
</div>
</div>

<div id="outline-container-sec-4-2-4" class="outline-4">
<h4 id="sec-4-2-4">802.11d-2001</h4>
<div class="outline-text-4" id="text-4-2-4">
<p>
增加了802.11设备用于其他国家的一些规范(欧美及日本以后的国家)，如Contry Code信息，会包
含在Beacons和Probe Response帧中。 
</p>
</div>
</div>

<div id="outline-container-sec-4-2-5" class="outline-4">
<h4 id="sec-4-2-5">802.11h-2003</h4>
<div class="outline-text-4" id="text-4-2-5">
<p>
该规范定义了DFS（动态频率改变）和TPC(传输功率控制)的行为。主要目
的是在让运行于5G的802.11设备能自动侦测雷达信号，并避开雷达使用的
信道，防止干扰雷达设备的使用。
</p>
</div>
</div>

<div id="outline-container-sec-4-2-6" class="outline-4">
<h4 id="sec-4-2-6">802.11i-2004</h4>
<div class="outline-text-4" id="text-4-2-6">
<p>
无线安全解决方案的三大关键部分：
</p>
<ol class="org-ol">
<li>data privacy（加密）
</li>
<li>data integrity（防止被篡改）
</li>
<li>authentication（身份验证）
</li>
</ol>

<p>
802.11标准一开始定义了两种认证方法：
</p>
<ol class="org-ol">
<li>Open System (任何人都可以通过验证)
</li>
<li>Shared Key（存在安全隐患）
</li>
</ol>

<p>
802.11i又称为RSN，提供了更强的数据加密机制和身份验证机制。主要的
改善体现在：
</p>
<ol class="org-ol">
<li>Data Privacy

<p>
使用更强的加密方法CCMP，它采用的是AES算法。
同时也定义了一个可选的加密方法TKIP，使用RC4算法，主要是为了兼
容旧的WEP加密方式的设备。
</p>
</li>

<li>Data Integrity

<p>
为了保证接收到的数据没有被篡改，WEP使用的方法叫做
Initialization Check Value (ICV). TKIP使用的方法叫做Message
Integrity Check (MIC). CCMP使用了强化版的MIC。另外，在所有的
802.11帧最后，都包含32-bit的CRC即FCS信息，用来保护帧负载的完
整性。
</p>
</li>

<li>Authentication

<p>
802.11i定义了两种认证方法：
</p>
<ul class="org-ul">
<li>802.1X with EAP methods
</li>

<li>PSK(Preshared Keys)
</li>
</ul>
</li>

<li>RSN

<p>
定义了一整套方法，包含：认证建立，安全关联协商，为STA和AP动态
产生加密密钥等。
</p>

<p>
Wi-Fi Protected Access 2 (WPA2):  802.11i security amendment.
WPA version 1: a preview of 802.11i.
</p>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-2-7" class="outline-4">
<h4 id="sec-4-2-7">802.11j-2004</h4>
<div class="outline-text-4" id="text-4-2-7">
<p>
The main goal set out by the IEEE Task Group j (TGj) was to
obtain Japanese regulatory approval by enhancing the 802.11 MAC
and 802.11a PHY to additionally operate in Japanese 4.9 GHz and
5 GHz  bands. 
</p>
</div>
</div>

<div id="outline-container-sec-4-2-8" class="outline-4">
<h4 id="sec-4-2-8">802.11e-2005</h4>
<div class="outline-text-4" id="text-4-2-8">
<p>
The 802.11e amendment defi nes the layer 2 MAC  methods needed
to meet the QoS requirements for time-sensitive applications
over IEEE 802.11 WLANs.  
</p>

<p>
Wi-Fi Multimedia (WMM): a “mirror” of 802.11e. 
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3">IEEE 802.11-2012 ratified amendments</h3>
<div class="outline-text-3" id="text-4-3">
</div><div id="outline-container-sec-4-3-1" class="outline-4">
<h4 id="sec-4-3-1">802.11r-2008</h4>
<div class="outline-text-4" id="text-4-3-1">
<p>
The 802.11r-2008 amendment is known as the fast basic service
set transition (FT) amendment. The technology is more often
referred to as fast secure roaming because it defi nes faster
handoffs when roaming occurs between cells in a WLAN using the
strong security defi ned by a robust secure network (RSN).
</p>
</div>
</div>

<div id="outline-container-sec-4-3-2" class="outline-4">
<h4 id="sec-4-3-2">802.11k-2008</h4>
<div class="outline-text-4" id="text-4-3-2">
<p>
定义了一些Radio Resource Measurement的方法。如下是一些主要的
Radio Resource Measurement：
</p>
<ol class="org-ol">
<li>Transmit Power Control (TPC)

<p>
802.11h定义了5G下的TPC的使用，这里主要定义了其他频段下TPC的
使用。
</p>
</li>

<li>Client Statistics

<p>
向AP回馈SNR，信号强度和数据传输速率等信息。
</p>
</li>

<li>Neighbor Reports

<p>
提供附近其他AP的一些信息，使得STA有能力判断是否可以漫游到其
他AP上。802.11k向STA反馈一些RF环境相关信息，便于STA更好地做
出漫游的选择。
</p>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-3-3" class="outline-4">
<h4 id="sec-4-3-3">802.11y-2008</h4>
<div class="outline-text-4" id="text-4-3-3">
<p>
The objective of the IEEE Task Group y (TGy) was to standardize
the mechanisms required to allow high-powered, shared 802.11
operations with other non-802.11 devices in the 3650 MHz–3700
MHz licensed band in the United States.
</p>
</div>
</div>

<div id="outline-container-sec-4-3-4" class="outline-4">
<h4 id="sec-4-3-4">802.11w-2009</h4>
<div class="outline-text-4" id="text-4-3-4">
<p>
提供一种安全的方式去传送管理帧，防止管理帧被窃听。802.11w帧也
   称为强健管理帧。
</p>
</div>
</div>

<div id="outline-container-sec-4-3-5" class="outline-4">
<h4 id="sec-4-3-5">802.11n-2009</h4>
<div class="outline-text-4" id="text-4-3-5">
<p>
增强2.4G和5G的吞吐量。定义了一种新的操作，叫做HT（High
Throughput），对PHY和MAC进行了加强以支持高达600Mbps的数据传输率，
聚合吞吐率达到100Mbps以上。
</p>

<p>
HT无线使用了MIMO+OFDM技术。与802.11a/b/g设备兼容。
</p>
</div>
</div>

<div id="outline-container-sec-4-3-6" class="outline-4">
<h4 id="sec-4-3-6">802.11p-2010</h4>
<div class="outline-text-4" id="text-4-3-6">
<p>
加强802.11标准规范以支持Intelligent Transportation Systems
(ITS) applications。以更好地 支持高速移动下的数据传输。
</p>
</div>
</div>

<div id="outline-container-sec-4-3-7" class="outline-4">
<h4 id="sec-4-3-7">802.11z-2010</h4>
<div class="outline-text-4" id="text-4-3-7">
<p>
802.11p is also known as Wireless Access in Vehicular
Environments (WAVE) and is a possible foundation for a US
Department of Transportation project called Dedicated Short
Range Communications (DSRC).
</p>
</div>
</div>

<div id="outline-container-sec-4-3-8" class="outline-4">
<h4 id="sec-4-3-8">802.11u-2011</h4>
<div class="outline-text-4" id="text-4-3-8">
<p>
主要解决802.11网络与其他外部网络之间的问题。
</p>

<p>
The 802.11u-2011 amendment is the basis for the Wi-Fi Alliance’s
Hotspot 2.0 specifi cation and its Passpoint certifi cation.
</p>
</div>
</div>

<div id="outline-container-sec-4-3-9" class="outline-4">
<h4 id="sec-4-3-9">802.11v-2011</h4>
<div class="outline-text-4" id="text-4-3-9">
<p>
802.11v provides for an exchange of information that can
potentially ease the configuration of client stations
wirelessly from a central point of management. 802.11v-2011 defi
nes Wireless Network Management (WNM)
</p>
</div>
</div>

<div id="outline-container-sec-4-3-10" class="outline-4">
<h4 id="sec-4-3-10">802.11s-2011</h4>
<div class="outline-text-4" id="text-4-3-10">
<p>
The 802.11s amendment proposes the use of a protocol for
adaptive, autoconfiguring systems that support broadcast,
multicast, and unicast traffi cover a multihop mesh WDS.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4">Post-2012 ratified amendments</h3>
<div class="outline-text-3" id="text-4-4">
</div><div id="outline-container-sec-4-4-1" class="outline-4">
<h4 id="sec-4-4-1">02.11ae-2012</h4>
<div class="outline-text-4" id="text-4-4-1">
<p>
The 802.11ae amendment specifi es enhancements to QoS
management.
</p>
</div>
</div>

<div id="outline-container-sec-4-4-2" class="outline-4">
<h4 id="sec-4-4-2">802.11aa-2012</h4>
<div class="outline-text-4" id="text-4-4-2">
<p>
The 802.11aa amendment specifi es QoS enhancements to the
802.11 Media Access Control (MAC) for robust audio and video
streaming for both consumer and enterprise applications.
</p>
</div>
</div>

<div id="outline-container-sec-4-4-3" class="outline-4">
<h4 id="sec-4-4-3">802.11ad-2012</h4>
<div class="outline-text-4" id="text-4-4-3">
<p>
The 802.11ad amendment defines Very High Throughput (VHT)
enhancements using the much higher unlicensed frequency band of
60 GHz.
</p>
</div>
</div>

<div id="outline-container-sec-4-4-4" class="outline-4">
<h4 id="sec-4-4-4">802.11ac-2013</h4>
<div class="outline-text-4" id="text-4-4-4">
<p>
The 802.11ac-2013 amendment defi nes Very High Throughput (VHT)
enhancements below 6 GHz. The technology will only be used in
the 5 GHz frequency bands where 802.11a/n radios already
operate.
</p>

<p>
mainly improvements are:
</p>
<ol class="org-ol">
<li>Wider Channels

<p>
802.11ac brings us the capability of 80 MHz and 160 MHz
channels.
</p>
</li>

<li>New Modulation

<p>
 802.11ac will provide the capability to use 256-QAM
modulation, which has the potential to provide a 30 percent
increase in speed.
</p>
</li>

<li>More Spatial Streams

<p>
802.11ac radios could be built to transmit and receive up to
eight spatial streams.
</p>
</li>

<li>Improved MIMO and Beamforming

<p>
MU-MIMO, transmit a signal to multiple client stations on the
same channel simultaneously if the client stations are in
different physical areas.
</p>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-4-5" class="outline-4">
<h4 id="sec-4-4-5">802.11af-2014</h4>
<div class="outline-text-4" id="text-4-4-5">
<p>
The 802.11af amendment allows the use of wireless in the newly
opened TV white space (TVWS) frequencies between 54 MHz and 790
MHz.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5">IEEE 802.11 draft amendments</h3>
<div class="outline-text-3" id="text-4-5">
</div><div id="outline-container-sec-4-5-1" class="outline-4">
<h4 id="sec-4-5-1">802.11ah</h4>
<div class="outline-text-4" id="text-4-5-1">
<p>
The 802.11ah draft amendment defi nes the use of Wi-Fi in
frequencies below 1 GHz.
</p>
</div>
</div>

<div id="outline-container-sec-4-5-2" class="outline-4">
<h4 id="sec-4-5-2">802.11ai</h4>
<div class="outline-text-4" id="text-4-5-2">
<p>
The goal of the 802.11ai draft amendment is to provide a fast
initial link setup (FILS). This technology could allow a STA to
establish a secure link setup in less than 100 ms.
</p>
</div>
</div>

<div id="outline-container-sec-4-5-3" class="outline-4">
<h4 id="sec-4-5-3">802.11aj</h4>
<div class="outline-text-4" id="text-4-5-3">
<p>
The 802.11aj draft amendment is to provide modifi cations to the
IEEE 802.11ad-2012 amendment’s PHY and MAC layer to provide
support for operating in the Chinese Milli-Meter Wave (CMMW)
frequency bands.
</p>
</div>
</div>

<div id="outline-container-sec-4-5-4" class="outline-4">
<h4 id="sec-4-5-4">802.11ak</h4>
<div class="outline-text-4" id="text-4-5-4">
<p>
The 802.11ak draft amendment is also referred to as General Link
(GLK). The task group is exploring enhancement to 802.11 links
for use in bridged networks.
</p>
</div>
</div>

<div id="outline-container-sec-4-5-5" class="outline-4">
<h4 id="sec-4-5-5">802.11aq</h4>
<div class="outline-text-4" id="text-4-5-5">
<p>
enables delivery of network service information prior to the
association of stations on an 802.11 network.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4-6" class="outline-3">
<h3 id="sec-4-6">Review Questions:</h3>
<div class="outline-text-3" id="text-4-6">
<ol class="org-ol">
<li>An ERP (802.11g) network mandates support for which two spread
spectrum technologies?   

<p>
<code>A. ERP-OFDM</code>   
</p>

<p>
B. FHSS   
</p>

<p>
C. ERP-PBCC   
</p>

<p>
<code>D. ERP-DSSS/CCK</code>   
</p>

<p>
E. CSMA/CA    
</p>
</li>

<li>The 802.11-2012 standard using an ERP-DSSS/CCK radio supports
which data rates?

<p>
A. 3, 6, and 12 Mbps
</p>

<p>
B. 6, 9, 12, 18, 24, 36, 48, and 54 Mbps
</p>

<p>
C. 6, 12, 24, and 54 Mbps
</p>

<p>
D. 6, 12, and 24 Mbps
</p>

<p>
<code>E. 1, 2, 5.5, and 11 Mbps</code>
</p>
</li>

<li>Which types of devices were defined in the original 802.11
standard? (Choose all that  apply.)

<p>
A. OFDM
</p>

<p>
<code>B. DSSS</code>
</p>

<p>
C. HR-DSSS
</p>

<p>
<code>D. IR</code>
</p>

<p>
<code>E. FHSS</code>
</p>

<p>
F. ERP
</p>
</li>

<li>Which 802.11 amendment defines wireless mesh networking
mechanisms?

<p>
A. 802.11n
</p>

<p>
B. 802.11u
</p>

<p>
<code>C. 802.11s</code>
</p>

<p>
D. 802.11v
</p>

<p>
E. 802.11k
</p>
</li>

<li>A robust security network (RSN) requires the use of which
security mechanisms? (Choose  all that apply.)

<p>
A. 802.11x
</p>

<p>
B. WEP
</p>

<p>
C. IPsec
</p>

<p>
<code>D. CCMP/AES</code>
</p>

<p>
E. CKIP
</p>

<p>
<code>F. 802.1X</code>
</p>
</li>

<li>An 802.11a radio card can transmit on the <span class="underline">_  frequency and uses
_</span> spread   spectrum technology.

<p>
A. 5 MHz, OFDM
</p>

<p>
B. 2.4 GHz, HR-DSSS
</p>

<p>
C. 2.4 GHz, ERP-OFDM
</p>

<p>
<code>D. 5 GHz, OFDM</code>
</p>

<p>
E. 5 GHz, DSSS
</p>
</li>

<li>What are the required data rates of an OFDM station?

<p>
A. 3, 6, and 12 Mbps
</p>

<p>
B. 6, 9, 12, 18, 24, 36, 48, and 54 Mbps
</p>

<p>
C. 6, 12, 24, and 54 Mbps
</p>

<p>
<code>D. 6, 12, and 24 Mbps</code>
</p>

<p>
E. 1, 2, 5.5, and 11 Mbps
</p>
</li>

<li>When implementing an 802.1X/EAP RSN network with a VoWiFi
solution, what is needed  to avoid latency issues during
roaming?

<p>
A. Inter-Access Point Protocol
</p>

<p>
<code>B. Fast BSS Transition</code>
</p>

<p>
C. Distributed Coordination Function
</p>

<p>
D. Roaming Coordination Function
</p>

<p>
E. Lightweight APs
</p>
</li>

<li>Which new technologies debuted in the 802.11ac-2013 amendment?
(Choose all that apply.)

<p>
A. MIMO
</p>

<p>
<code>B. MU-MIMO</code>
</p>

<p>
<code>C. 256-QAM</code>
</p>

<p>
D. 40 MHz channels
</p>

<p>
<code>E. 80 MHz channels</code>
</p>
</li>

<li>What is the primary reason that OFDM (802.11a) radios cannot
communicate with ERP  (802.11g) radios?

<p>
A. 802.11a uses OFDM, and 802.11g uses DSSS.
</p>

<p>
B. 802.11a uses DSSS, and 802.11g uses OFDM.
</p>

<p>
C. 802.11a uses OFDM, and 802.11g uses CCK.
</p>

<p>
<code>D. 802.11a operates at 5 GHz, and 802.11g operates at 2.4 GHz.</code>
</p>

<p>
E. 802.11a requires dynamic frequency selection, and 802.11g does  not.
</p>
</li>

<li>What two technologies are used to prevent 802.11 radios from
interfering with radar and  satellite transmissions at 5 GHz?

<p>
<code>A. Dynamic frequency selection</code>
</p>

<p>
B. Enhanced Distributed Channel Access
</p>

<p>
C. Direct sequence spread spectrum
</p>

<p>
D. Temporal Key Integrity Protocol
</p>

<p>
<code>E. Transmit power control</code>
</p>
</li>

<li>Which 802.11 amendments provide for throughput of 1 Gbps or
higher? (Choose all that  apply.)

<p>
A. 802.11aa
</p>

<p>
B. 802.11ab
</p>

<p>
<code>C. 802.11ac</code>
</p>

<p>
<code>D. 802.11ad</code>
</p>

<p>
E. 802.11ae
</p>

<p>
F. 802.11af
</p>
</li>

<li>As defined by the 802.11-2012 standard, which equipment is
compatible? (Choose all that  apply.)

<p>
<code>A. ERP and HR-DSSS</code>
</p>

<p>
B. HR-DSSS and FHSS
</p>

<p>
C. OFDM and ERP
</p>

<p>
<code>D. 802.11a and 802.11h</code>
</p>

<p>
<code>E. DSSS and HR-DSSS</code>
</p>
</li>

<li>Maximum data rates of are permitted using OFDM radios.

<p>
A. 108 Mbps
</p>

<p>
B. 22 Mbps
</p>

<p>
C. 24 Mbps
</p>

<p>
<code>D. 54 Mbps</code>
</p>

<p>
E. 11 Mbps
</p>
</li>

<li>What are the security options available as defined in the
original IEEE Std 802.11-1999  (R2003)? (Choose all that
apply.)

<p>
A. CCMP/AES
</p>

<p>
<code>B. Open System authentication</code>
</p>

<p>
C. Preshared keys
</p>

<p>
<code>D. Shared Key authentication</code>
</p>

<p>
<code>E. WEP</code>
</p>

<p>
F. TKIP
</p>
</li>

<li>The 802.11u-2011 amendment is also known as what?

<p>
<code>A. Wireless Interworking with External Networks (WIEN)</code>
</p>

<p>
B. Wireless Local Area Networking (WLAN)
</p>

<p>
C. Wireless Performance Prediction (WPP)
</p>

<p>
D. Wireless Access in Vehicular Environments (WAVE)
</p>

<p>
E. Wireless Access Protocol (WAP)
</p>
</li>

<li>The 802.11-2012 standard defines which two technologies for
quality of service (QoS) in a WLAN?

<p>
<code>A. EDCA</code>
</p>

<p>
B. PCF
</p>

<p>
<code>C. Hybrid Coordination Function Controlled Channel Access</code>
</p>

<p>
D. VoIP
</p>

<p>
E. Distributed Coordination Function
</p>

<p>
F. VoWiFi
</p>
</li>

<li>The 802.11h amendment (now part of the 802.11-2012 standard)
introduced what two major changes for 5 GHz radios?

<p>
<code>A. U-NII-2 Extended</code>
</p>

<p>
B. IAPP
</p>

<p>
<code>C. Radar detection</code>
</p>

<p>
D. Transmit Frequency Avoidance
</p>

<p>
E. Frequency hopping spread spectrum
</p>
</li>

<li>The 802.11b amendment defined which PHY?

<p>
<code>A. HR-DSSS</code>
</p>

<p>
B. FHSS
</p>

<p>
C. OFDM
</p>

<p>
D. PBCC
</p>

<p>
E. EIRP
</p>
</li>

<li>Which layers of the OSI model are referenced in the 802.11
standard? (Choose all that   apply.)

<p>
A. Application
</p>

<p>
<code>B. Data-Link</code>
</p>

<p>
C. Presentation
</p>

<p>
<code>D. Physical</code>
</p>

<p>
E. Transport
</p>

<p>
F. Network
</p>
</li>
</ol>
</div>
</div>
</div>


<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">Ch6 Wireless Networks and Spread Spectrum Technologies</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-sec-5-1" class="outline-3">
<h3 id="sec-5-1">Industrial, Scientific, and Medical Bands</h3>
<div class="outline-text-3" id="text-5-1">
<p>
ISM的频率范围为， 这些范围由ITU-T定义：
</p>
<ul class="org-ul">
<li>902 MHz – 928 MHz (26 MHz wide)   Insdustrial Band
</li>

<li>2.4 GHz – 2.5 GHz (100 MHz wide)    Scientific Band

<p>
无线电波使用如下一些频段：
</p>

<ol class="org-ol">
<li>802.11 (FHSS radios or DSSS radios)
</li>

<li>802.11b (HR-DSSS radios)
</li>

<li>802.11g (ERP radios)
</li>

<li>802.11n (HT radios)
</li>
</ol>
</li>

<li>5.725 GHz – 5.875 GHz (150 MHz wide)   Medical Band
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-5-2" class="outline-3">
<h3 id="sec-5-2">Unlicensed National Information Infrastructure Bands</h3>
<div class="outline-text-3" id="text-5-2">
<p>
The IEEE 802.11a amendment designated WLAN transmissions within
the frequency space of the three 5 GHz bands, each with four
channels. These frequency ranges are known as the Unlicensed
National Information Infrastructure (U-NII) bands.
</p>

<p>
802.11a定义了三组频率：U-NII-1， U-NII-2，U-NII-3， 802.11h在此基
础上又增加了12个可用信道，称为U-NII-2-Extended。目前在5G U-NII频
段进行数据传输的WiFi无线电波采用了如下一些技术：
</p>

<ul class="org-ul">
<li>802.11a (OFDM radios)
</li>
<li>802.11n (HT radios)
</li>
<li>802.11ac (VHT radios)
</li>
</ul>
</div>

<div id="outline-container-sec-5-2-1" class="outline-4">
<h4 id="sec-5-2-1">U-NII-1 (Lower Band)</h4>
<div class="outline-text-4" id="text-5-2-1">
<p>
spans from 5.150 GHz to 5.250 GHz(100 MHz), 有4个20MHz带宽的信道。
</p>
</div>
</div>

<div id="outline-container-sec-5-2-2" class="outline-4">
<h4 id="sec-5-2-2">U-NII-2 (Middle Band)</h4>
<div class="outline-text-4" id="text-5-2-2">
<p>
spans from 5.250 GHz to 5.350 GHz（100 MHz）， 也是有4个20MHz带
宽的信道。运行于此频段的WiFi设备必须支持DFS。
</p>
</div>
</div>

<div id="outline-container-sec-5-2-3" class="outline-4">
<h4 id="sec-5-2-3">U-NII-2 Extended</h4>
<div class="outline-text-4" id="text-5-2-3">
<p>
spans from 5.470 GHz to 5.725 GHz(255 MHz)， 12个20MHz带宽的信道。
运行于此频段的WiFi设备必须支持DFS。
</p>
</div>
</div>

<div id="outline-container-sec-5-2-4" class="outline-4">
<h4 id="sec-5-2-4">U-NII-3 (Upper Band)</h4>
<div class="outline-text-4" id="text-5-2-4">
<p>
spans from 5.725 GHz to 5.850 GHz（125 MHz）。 5 个20MHz的信道，
</p>
</div>
</div>

<div id="outline-container-sec-5-2-5" class="outline-4">
<h4 id="sec-5-2-5">Future U-NII Bands</h4>
<div class="outline-text-4" id="text-5-2-5">
<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 2:</span> The new 5 GHz U-NII bands</caption>

<colgroup>
<col  class="left" />

<col  class="left" />

<col  class="left" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">Old Name</th>
<th scope="col" class="left">New Name</th>
<th scope="col" class="left">Frequency</th>
<th scope="col" class="left">Channels</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">U-NII-1</td>
<td class="left">U-NII-1</td>
<td class="left">5.15 – 5.25 GHz</td>
<td class="left">4 channels</td>
</tr>

<tr>
<td class="left">U-NII-2</td>
<td class="left">U-NII-2A</td>
<td class="left">5.25 – 5.35 GHz</td>
<td class="left">5 channels</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">U-NII-2B</td>
<td class="left">5.35 – 5.47 GHz</td>
<td class="left">6 channels</td>
</tr>

<tr>
<td class="left">U-NII-2 Extended</td>
<td class="left">U-NII-2C</td>
<td class="left">5.47 – 5.725 GHz</td>
<td class="left">13 channels</td>
</tr>

<tr>
<td class="left">U-NII-3</td>
<td class="left">U-NII-3</td>
<td class="left">5.725 – 5.85 GHz</td>
<td class="left">5 channels</td>
</tr>

<tr>
<td class="left">&#xa0;</td>
<td class="left">U-NII-4</td>
<td class="left">5.85 – 5.925 GHz</td>
<td class="left">4 channels</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


<div id="outline-container-sec-5-3" class="outline-3">
<h3 id="sec-5-3">Narrowband and Spread Spectrum</h3>
<div class="outline-text-3" id="text-5-3">
<p>
有两种主要的RF传输技术：narrowband, spread spectrum。
narrowband需要更高的功率发射信号，且易受干扰。
</p>
</div>
</div>

<div id="outline-container-sec-5-4" class="outline-3">
<h3 id="sec-5-4">Multipath Interference</h3>
<div class="outline-text-3" id="text-5-4">
<p>
<code>delay spread:</code> the delay between the main signal and the refl
ected signal
</p>

<p>
<code>intersymbol interference (ISI):</code> If the delay spread is too
great, data from the reflected signal may interfere with the
same data stream from the main signal
</p>

<p>
Prior to 802.11n and 802.11ac MIMO technology, multipath had
always been a concern.会影响性能和吞吐量。
</p>
</div>
</div>

<div id="outline-container-sec-5-5" class="outline-3">
<h3 id="sec-5-5">Frequency Hopping Spread Spectrum</h3>
<div class="outline-text-3" id="text-5-5">
<p>
used by 802.11 legacy device, 提供了1， 2Mbps的传输速率。
the way FHSS works is that it transmits data by using a small
frequency carrier space, then hops to another small frequency
carrier space and transmits data, then to another frequency, and
so on. FHSS适合用于narrowband传输中。
</p>
</div>

<div id="outline-container-sec-5-5-1" class="outline-4">
<h4 id="sec-5-5-1">Hopping Sequence</h4>
<div class="outline-text-4" id="text-5-5-1">
<p>
FHSS radios use a predefined hopping sequence (also called a
hopping pattern or hopping set) comprising a series of small
carrier frequencies, or hops.
</p>

<p>
The 802.11 standard defi nes hopping sequences that can be confi
gured on an FHSS access point, and the hopping sequence
information is delivered to client stations via the beacon
management frame.
</p>
</div>
</div>

<div id="outline-container-sec-5-5-2" class="outline-4">
<h4 id="sec-5-5-2">Dwell Time</h4>
<div class="outline-text-4" id="text-5-5-2">
<p>
Dwell time is a defi ned amount of time that the FHSS system
transmits on a specific frequency before it switches to the next
frequency in the hop set.
</p>
</div>
</div>

<div id="outline-container-sec-5-5-3" class="outline-4">
<h4 id="sec-5-5-3">Hop Time</h4>
<div class="outline-text-4" id="text-5-5-3">
<p>
a measurement of the amount of time it takes for the transmitter
to change from one frequency to another.
</p>
</div>
</div>

<div id="outline-container-sec-5-5-4" class="outline-4">
<h4 id="sec-5-5-4">Modulation</h4>
<div class="outline-text-4" id="text-5-5-4">
<p>
FHSS使用GFSK(Gaussian frequency shift keying)来编码数据。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5-6" class="outline-3">
<h3 id="sec-5-6">Direct Sequence Spread Spectrum</h3>
<div class="outline-text-3" id="text-5-6">
<p>
DSSS支持2.4G下1，2Mbps速率。801.11b提出了HR-DSSS技术，支持5.5
Mbps和11Mbps的速率。802.11b设备 兼容802.11 DSSS设备。
</p>

<p>
DSSS is set to one channel. The data that is being transmitted is
spread across the range of frequencies that make up the
channel. The process of spreading the data across the channel is
known as <i>data encoding</i>.
</p>
</div>

<div id="outline-container-sec-5-6-1" class="outline-4">
<h4 id="sec-5-6-1">DSSS Data Encoding</h4>
<div class="outline-text-4" id="text-5-6-1">
<p>
由于802.11无线传输容易受到干扰，从而导致数据被破坏，为了降低数
据传输过程中由于RF干扰导致接收到的数据被破坏而无法恢复，每个有
效数据比特位会被编码并作为多个比特位进行传输。
</p>

<p>
The task of adding additional, redundant information to the
data is known as <i>processing gain</i>.
</p>

<p>
The system converts the 1 bit of data into a series of bits
that are referred to as <i>chips</i>.
</p>

<p>
例如，如下编码方式：
Binary data 1 = 1 0 1 1 0 1 1 1 0 0 0
Binary data 0 = 0 1 0 0 1 0 0 0 1 1 1
</p>

<p>
This process of converting a single data bit into a sequence is
often called <i>spreading</i> or <i>chipping</i>.
</p>
</div>
</div>

<div id="outline-container-sec-5-6-2" class="outline-4">
<h4 id="sec-5-6-2">Modulation</h4>
<div class="outline-text-4" id="text-5-6-2">
<p>
After the data has been encoded using a chipping method, the
transmitter needs to modulate the signal to create a carrier
signal containing the chips.
</p>

<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption class="t-above"><span class="table-number">Table 3:</span> DSSS and HR-DSSS encoding and modulation overview</caption>

<colgroup>
<col  class="left" />

<col  class="right" />

<col  class="left" />

<col  class="right" />

<col  class="right" />

<col  class="left" />
</colgroup>
<thead>
<tr>
<th scope="col" class="left">&#xa0;</th>
<th scope="col" class="right">Data rate (Mbps)</th>
<th scope="col" class="left">Encoding</th>
<th scope="col" class="right">Chip length</th>
<th scope="col" class="right">Bits encoded</th>
<th scope="col" class="left">Modulation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="left">DSSS</td>
<td class="right">1</td>
<td class="left">Barker coding</td>
<td class="right">11</td>
<td class="right">1</td>
<td class="left">DBPSK</td>
</tr>

<tr>
<td class="left">DSSS</td>
<td class="right">2</td>
<td class="left">Barker coding</td>
<td class="right">11</td>
<td class="right">1</td>
<td class="left">DQPSK</td>
</tr>

<tr>
<td class="left">HR-DSSS</td>
<td class="right">5.5</td>
<td class="left">CCK coding</td>
<td class="right">8</td>
<td class="right">4</td>
<td class="left">DQPSK</td>
</tr>

<tr>
<td class="left">HR-DSSS</td>
<td class="right">11</td>
<td class="left">CCK coding</td>
<td class="right">8</td>
<td class="right">8</td>
<td class="left">DQPSK</td>
</tr>
</tbody>
</table>
</div>
</div>


<div id="outline-container-sec-5-6-3" class="outline-4">
<h4 id="sec-5-6-3">Packet Binary Convolutional Code</h4>
<div class="outline-text-4" id="text-5-6-3">
<p>
Packet Binary Convolutional Code (PBCC) is a modulation
technique that supports data rates of 5.5, 11, 22, and 33 Mbps
</p>
</div>
</div>

<div id="outline-container-sec-5-6-4" class="outline-4">
<h4 id="sec-5-6-4">Orthogonal Frequency Division Multiplexing</h4>
<div class="outline-text-4" id="text-5-6-4">
<p>
OFDM is not a spread spectrum technology, even though it has
similar properties to spread spectrum, such as low transmit
power and using more bandwidth than is required to transmit
data. Because of these similarities, OFDM is often referred to
as a spread spectrum technology even though technically that
reference is incorrect. OFDM actually transmits across 52
separate, closely and precisely spaced frequencies, often
referred to as <i>subcarriers</i>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-5-7" class="outline-3">
<h3 id="sec-5-7">Throughput vs. Bandwidth</h3>
<div class="outline-text-3" id="text-5-7">
<p>
Wireless communication is typically performed within a
constrained set of frequencies known as a frequency band. This
frequency band is the <i>bandwidth</i>.
</p>

<p>
Data encoding and modulation determine data rates, which are
sometimes also referred to as <i>data bandwidth</i>.
</p>

<p>
Because of the half-duplex nature of the medium and the overhead
generated by CSMA/CA, the actual aggregate throughput is
typically 50 percent or less of the data rates for 802.11a/b/g
legacy transmissions, and 60-70 percent of the data rates for
802.11n/ac transmissions.
</p>
</div>
</div>
</div>


<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">Ch7 Wireless LAN Topologies</h2>
<div class="outline-text-2" id="text-6">
</div><div id="outline-container-sec-6-1" class="outline-3">
<h3 id="sec-6-1">Wireless networking topologies</h3>
</div>

<div id="outline-container-sec-6-2" class="outline-3">
<h3 id="sec-6-2">802.11 topologies</h3>
</div>

<div id="outline-container-sec-6-3" class="outline-3">
<h3 id="sec-6-3">802.11 configuration modes</h3>
<div class="outline-text-3" id="text-6-3">
</div><div id="outline-container-sec-6-3-1" class="outline-4">
<h4 id="sec-6-3-1">Wireless wide area network (WWAN)</h4>
<div class="outline-text-4" id="text-6-3-1">
<p>
GPRS, CDMA, TDMA, LET, GSM
</p>
</div>
</div>

<div id="outline-container-sec-6-3-2" class="outline-4">
<h4 id="sec-6-3-2">Wireless Metropolitan Area Network (WMAN)</h4>
<div class="outline-text-4" id="text-6-3-2">
<p>
802.16,  WiMax: a last-mile data-delivery solution.
</p>
</div>
</div>

<div id="outline-container-sec-6-3-3" class="outline-4">
<h4 id="sec-6-3-3">Wireless Personal Area Network (WPAN)</h4>
<div class="outline-text-4" id="text-6-3-3">
<p>
Bluetooth, Infrared, ZigBee, IEEE 802.15
</p>
</div>
</div>

<div id="outline-container-sec-6-3-4" class="outline-4">
<h4 id="sec-6-3-4">Wireless Local Area Network (WLAN)</h4>
<div class="outline-text-4" id="text-6-3-4">
<p>
802.11
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6-4" class="outline-3">
<h3 id="sec-6-4">802.11 Topologies</h3>
<div class="outline-text-3" id="text-6-4">
</div><div id="outline-container-sec-6-4-1" class="outline-4">
<h4 id="sec-6-4-1">Access Point</h4>
<div class="outline-text-4" id="text-6-4-1">
<p>
半双工方式收发数据。
</p>
</div>
</div>

<div id="outline-container-sec-6-4-2" class="outline-4">
<h4 id="sec-6-4-2">Client Station</h4>
<div class="outline-text-4" id="text-6-4-2">
<p>
STA必须与AP一样去竞争半双工RF媒介的使用权。
</p>
</div>
</div>

<div id="outline-container-sec-6-4-3" class="outline-4">
<h4 id="sec-6-4-3">Integration Service</h4>
<div class="outline-text-4" id="text-6-4-3">
<p>
enables delivery of MSDUs between the distribution system (DS) and
a non-IEEE-802.11 LAN via a portal.
</p>
</div>
</div>

<div id="outline-container-sec-6-4-4" class="outline-4">
<h4 id="sec-6-4-4">Distribution System</h4>
<div class="outline-text-4" id="text-6-4-4">
<p>
a <i>distribution system</i> (DS) that is used to interconnect a set of
basic service sets (BSSs) via integrated LANs to create an
extended service set。 
</p>

<p>
The DS consists of two main components:
</p>

<ol class="org-ol">
<li>Distribution System Medium (DSM)
A logical physical medium used to connect access points is
known as a distribution system medium (DSM).  802.3 medium是一
个例子。
</li>

<li>Distribution System Services (DSS)

<p>
通常构建上AP里面，以软件的形式存在。 使用802.11头部的Layer 2层
的地址，将Layer3~7的信息转发到Integration Service或其他的无线
STA。
</p>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-6-4-5" class="outline-4">
<h4 id="sec-6-4-5">Wireless Distribution System</h4>
<div class="outline-text-4" id="text-6-4-5">
<p>
The 802.11-2012 standard defines a mechanism for wireless
communication using a four-MAC-address frame format.
</p>

<p>
The standard describes such a frame format but does not describe
how such a mechanism or frame format would be used. This mechanism
is known as a <i>wireless distribution system (WDS)</i>.
</p>

<p>
WDS examples: bridging, repeaters, mesh networks.
</p>
</div>
</div>

<div id="outline-container-sec-6-4-6" class="outline-4">
<h4 id="sec-6-4-6">Service Set Identifier</h4>
<div class="outline-text-4" id="text-6-4-6">
<p>
The service set identifi er (SSID) is a logical name used to
identify an 802.11 wireless network.  不超过32个字符。
</p>
</div>
</div>

<div id="outline-container-sec-6-4-7" class="outline-4">
<h4 id="sec-6-4-7">Basic Service Set</h4>
<div class="outline-text-4" id="text-6-4-7">
<p>
The basic service set (BSS) is the cornerstone topology of an
802.11 network. The communicating devices that make up a BSS
consist of one AP radio with one or more client stations.
</p>
</div>
</div>

<div id="outline-container-sec-6-4-8" class="outline-4">
<h4 id="sec-6-4-8">Basic Service Set Identifier</h4>
<div class="outline-text-4" id="text-6-4-8">
<p>
AP的48比特（6字节）的MAC地址，也称为BSSID。
</p>
</div>
</div>

<div id="outline-container-sec-6-4-9" class="outline-4">
<h4 id="sec-6-4-9">Basic Service Area</h4>
<div class="outline-text-4" id="text-6-4-9">
<p>
The physical area of coverage provided by an access point in a BSS
is known as the basic <i>service area (BSA)</i>.
</p>
</div>
</div>

<div id="outline-container-sec-6-4-10" class="outline-4">
<h4 id="sec-6-4-10">Extended Service Set</h4>
<div class="outline-text-4" id="text-6-4-10">
<p>
An extended service set is two or more basic service sets
connected by a distribution system medium.
</p>
</div>
</div>

<div id="outline-container-sec-6-4-11" class="outline-4">
<h4 id="sec-6-4-11">Independent Basic Service Set</h4>
<div class="outline-text-4" id="text-6-4-11">
<p>
The radios that make up an IBSS network consist solely of client
stations (STAs), and no access point is deployed.
</p>
</div>
</div>

<div id="outline-container-sec-6-4-12" class="outline-4">
<h4 id="sec-6-4-12">Mesh Basic Service Set</h4>
<div class="outline-text-4" id="text-6-4-12">
<p>
When access points support mesh functions, they may be deployed
where wired network access is not possible
</p>

<p>
The mesh functions are used to provide wireless distribution of
network traffic, and the set of APs that provide mesh
distribution form a mesh basic service set (MBSS).
</p>
</div>
</div>

<div id="outline-container-sec-6-4-13" class="outline-4">
<h4 id="sec-6-4-13">QoS Basic Service Set</h4>
<div class="outline-text-4" id="text-6-4-13">
<p>
Quality of service (QoS) mechanisms can be implemented within all
of the 802.11 service sets.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-6-5" class="outline-3">
<h3 id="sec-6-5">802.11 Configuration Modes</h3>
<div class="outline-text-3" id="text-6-5">
</div><div id="outline-container-sec-6-5-1" class="outline-4">
<h4 id="sec-6-5-1">Access Point Modes</h4>
<div class="outline-text-4" id="text-6-5-1">
<p>
default is root mode. 
</p>

<p>
<code>Bridge Mode</code>   The AP radio is converted into a wireless
bridge. This typically adds extra MAC-layer intelligence to the
device and gives the AP the capability to learn and maintain
tables about MAC addresses from the wired side of the network.
</p>

<p>
<code>Workgroup Bridge Mode</code>  The AP radio is transformed into a
workgroup bridge which provides wireless backhaul for connected
802.3 wired clients. Repeater Mode The AP radio performs as a
repeater AP which extends the coverage area of a portal AP on the
same channel.
</p>

<p>
<code>Mesh Mode</code>  The AP radio operates as a wireless backhaul radio
for a mesh environment. Depending on the vendor, the backhaul
radio may also allow for client access.
</p>

<p>
<code>Scanner Mode</code> The AP radio is converted into a sensor radio,
allowing the AP to integrate into a wireless intrusion detection
system (WIDS) architecture. An AP in scanner mode is in a
continuous listening state while hopping between multiple
channels. Scanner mode is also often referred to as monitor mode.
</p>
</div>
</div>

<div id="outline-container-sec-6-5-2" class="outline-4">
<h4 id="sec-6-5-2">Client Station Modes</h4>
<div class="outline-text-4" id="text-6-5-2">
<ul class="org-ul">
<li>infrastructure mode
</li>
<li>Ad Hoc mode
</li>
</ul>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">Ch8 802.11 Medium Access</h2>
<div class="outline-text-2" id="text-7">
</div><div id="outline-container-sec-7-1" class="outline-3">
<h3 id="sec-7-1">CSMA/CA vs. CSMA/CD</h3>
<div class="outline-text-3" id="text-7-1">
<p>
由于802.11媒介是半双工的方式进行数据传输，所以不能采用Ethernet中
使用的CSMA/CD方法主动去检测是否有冲突发生。802.11会通过CSMA/CA的方
式来判断是否有其他STA在进行数据传输，确保任何时刻，只有一个STA在使
用媒介进行传输。
</p>

<p>
如果检测到其他STA在进行数据传输，当前STA会随机选择一个退避时间，并
进行等待，在等待期间，也会随时监测是否有其他STA在进行数据传输。
CSMA/CA只是确保任何时刻只有一个802.11设备在进行数据传输，但是仍然无
法避免冲突的产生，所以，在802.11规范中，定义了DCF功能，来作为媒介访
问方法去确保冲突最小化。
</p>
</div>
</div>

<div id="outline-container-sec-7-2" class="outline-3">
<h3 id="sec-7-2">Collision Detection</h3>
<div class="outline-text-3" id="text-7-2">
<p>
802.11的单播帧必须得到确认。 802.11n和802.11ac可以使用帧聚合，对聚
合帧可以使用 Block确认帧。绝大多数的单播帧都需要得到确认，多播或组
播帧不需要得到确认。单播帧的任何部分的内容被破坏的话，通过CRC都能够
检测出来，这样接收方就不会发送Ack帧给发送方。 发送方如果收到不确认
帧，就会假设发送失败，之后会对该帧进行重传。 
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015113049.png" alt="2015113049.png" />
</p>
<p><span class="figure-number">Figure 2:</span> Unicast acknowledgment</p>
</div>
</div>
</div>

<div id="outline-container-sec-7-3" class="outline-3">
<h3 id="sec-7-3">Distributed Coordination Function</h3>
<div class="outline-text-3" id="text-7-3">
<p>
DCF是802.11规范中要求必须实现的功能，其他两个可选的功能是：PCF和
HCF。
</p>

<p>
DCF的主要组成部分为：
</p>

<ol class="org-ol">
<li>Interframe space
</li>
<li>Duration/ID field
</li>
<li>Carrier sense
</li>
<li>Random backoff timer
</li>
</ol>
</div>

<div id="outline-container-sec-7-3-1" class="outline-4">
<h4 id="sec-7-3-1">Interframe Space (IFS)</h4>
<div class="outline-text-4" id="text-7-3-1">
<p>
<i>Interframe space (IFS)</i> is a period of time that exists between
transmissions of wireless frames. There are six types of
interframe spaces, which are listed here in order of shortest to
longest:
</p>
<ol class="org-ol">
<li>Reduced interframe space (RIFS), highest priority
</li>
<li>Short interframe space (SIFS), second highest priority
</li>
<li>PCF interframe space (PIFS), middle priority
</li>
<li>DCF interframe space (DIFS), lowest priority
</li>
<li>Arbitration interframe space (AIFS), used by QoS stations
</li>
<li>Extended interframe space (EIFS), used after receipt of
corrupted frames
</li>
</ol>

<p>
上述的帧间间隔实际的时间大小取决于网络的传输速度。 
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015113050.png" alt="2015113050.png" />
</p>
<p><span class="figure-number">Figure 3:</span> SIFS and DIFS</p>
</div>
</div>
</div>

<div id="outline-container-sec-7-3-2" class="outline-4">
<h4 id="sec-7-3-2">Duration/ID Field</h4>
<div class="outline-text-4" id="text-7-3-2">
<p>
该值的大小范围为：0 ~ 32,767。 该域的值表示RF媒体还需要保持多久忙
碌状态，其他的STA才能竞争使用RF媒介。 
</p>

<p>
在大部分情况下，Duration/ID域的值是代表一个媒介占用时间的值， 用
于重置其他STA的网络分配向量（NAV）的值。 在极少情况下，如PS-Poll
帧中，Duration/ID的值作为使用传统电源管理的STA的一个ID值。
</p>
</div>
</div>

<div id="outline-container-sec-7-3-3" class="outline-4">
<h4 id="sec-7-3-3">Carrier Sense</h4>
<div class="outline-text-4" id="text-7-3-3">
<p>
对于802.11 CSMA/CA设备，在进行数据传输之前，需要执行一下载波侦听，
用于检查当前媒介是否处于忙碌状态。主要有两种方法：
</p>

<ol class="org-ol">
<li>虚拟载波侦听。

<p>
虚拟载波侦听使用了一种计时器机制，称之为 <i>network allocation
vector(NAV)</i> 。 NAV计时器会根据上一次帧传输的 <code>Duration</code> 值，
预测接下来需要占用媒介的时间。
</p>

<p>
当802.11设备没有进行数据传输时，它会进行监听，当它监听到从其他
STA传送过来的帧时，会查看帧的头部信息，看Duration/ID域是否包含
<code>Duration</code> 值或一个ID值。 当它表示一个 <code>Duration</code> 值时，监听帧
的这个设备会将自己的NAV计时器设置为读到的值，然后启用计时器倒
数，直到计时器的值变为0。 在此之前，该STA都不能去竞争媒介的访
问权。 
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015113051.png" alt="2015113051.png" />
</p>
<p><span class="figure-number">Figure 4:</span> Virtual carrier sense</p>
</div>
</li>

<li>物理载波侦听。

<p>
Physical carrier sensing is performed constantly by all
stations that are not transmitting or receiving. When a
station performs a physical carrier sense, it is actually
listening to the channel to see whether any other transmitters
are taking up the channel.
</p>

<p>
虚拟载波侦听工作在Layer 2， 而物理载波侦听工作于Layer 1。 两种
载波方式可以同时运行。
</p>

<p>
Clear Channel Assessment(CCA):  
</p>
<ol class="org-ol">
<li>determine whether a frame transmission is inbound for a station to receive.
</li>

<li>determine whether the medium is busy before transmitting.
</li>
</ol>
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-7-3-4" class="outline-4">
<h4 id="sec-7-3-4">Random Backoff Timer</h4>
<div class="outline-text-4" id="text-7-3-4">
<p>
802.11 STA会在一个竞争窗口(CW)时间竞争媒介的使用权，该窗口期称为
<i>backoff time</i> 。 工作站选择一个不超过CW值的随机数， 然后再乘以时
隙时间slot，slot的值跟具体的物理层有关（DSSS、OFDM等）。
</p>

<p>
当启动backoff计时器后，只要在某个时隙时间内，媒介上没有数据传输，
计时器的值就会减掉一个时隙时间。如果物理载波或虚拟载波侦听机制检
测到媒介处于忙碌状态，那么该计时器就会暂停。 当媒介空闲时间大于
DIFS, AIFS或EIFS，backoff计时器会重新倒计时。 一次不成功的传输会
导致CW的大小成指数倍增长。
</p>

<p>
如下是退避机制的一个例子：
</p>
<ol class="org-ol">
<li>An OFDM station selects a random number from a contention
window of 0–15. For this example, the number chosen is 4.
</li>
<li>The station multiplies the random number of 4 by a slot time of 9μs.
</li>
<li>The random backoff timer has a value of 36μs (4 slots).
</li>
<li>For every slot time during which there is no medium activity,
the backoff time is decremented by a slot time.
</li>
<li>The station decrements the backoff timer until the timer is zero.
</li>
<li>The station transmits if the medium is clear.
</li>
</ol>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015113052.png" alt="2015113052.png" />
</p>
<p><span class="figure-number">Figure 5:</span> Contention window length</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-7-4" class="outline-3">
<h3 id="sec-7-4">Point Coordination Function</h3>
<div class="outline-text-3" id="text-7-4">
<p>
这是一种Polling的方式。 AP充当点协调者的功能。 PCF只用于一个BSS内
部。 不能用于Ad Hoc网络（IBSS）， 因为没有AP存在。
</p>

<p>
AP和STA都要支持PCF功能，才能使用PCF机制。
</p>

<p>
目前，暂时没有实现上述机制的产品面世。 
</p>
</div>
</div>

<div id="outline-container-sec-7-5" class="outline-3">
<h3 id="sec-7-5">Hybrid Coordination Function</h3>
<div class="outline-text-3" id="text-7-5">
<p>
HCF结合了DCF和PCF的功能，并进行了加强，创造了两个访问信道的方法：
</p>
<ol class="org-ol">
<li>Enhanced Distributed Channel Access (EDCA)
</li>
<li>HCF Controlled Channel Access (HCCA)
</li>
</ol>

<p>
DCF和PCF允许802.11传输单个帧，之后，仍然需要继续竞争媒介去传输下一
帧。HCF允许一个802.11设备在媒介传输时，发送多个帧。 当支持HCF的设
备竞争媒介时，它会分配到一段时间，去发送帧，这段时间称为 <i>transmit
opportunity (TXOP)</i> 。 在此期间，它可以传输多个帧。 在传输这些帧时，
使用SIFS。
</p>
</div>
</div>

<div id="outline-container-sec-7-6" class="outline-3">
<h3 id="sec-7-6">Block Acknowledgment</h3>
<div class="outline-text-3" id="text-7-6">
<p>
A Block ACK improves channel efficiency by aggregating several
acknowledgments into one single acknowledgment frame.
</p>
</div>
</div>

<div id="outline-container-sec-7-7" class="outline-3">
<h3 id="sec-7-7">Wi-Fi Multimedia</h3>
<div class="outline-text-3" id="text-7-7">
<p>
The 802.11e amendment defi ned the layer 2 MAC methods needed to
meet the QoS requirements for time-sensitive applications over
IEEE 802.11 wireless LANs. The Wi-Fi Alliance introduced the Wi-Fi
Multimedia (WMM) certifi cation as a partial mirror of 802.11e
amendment.
</p>
</div>
</div>

<div id="outline-container-sec-7-8" class="outline-3">
<h3 id="sec-7-8">Airtime Fairness</h3>
<div class="outline-text-3" id="text-7-8">
<p>
在802.11媒介访问过程中，每个设备都需要竞争使用媒介传输数据。 对
于每个设备来说， 竞争机会均等。 当一个速率高的设备与一个速率低
的设备同时出现在一个网络中竞争使用媒介时，会降低高速率设备的网
络吞吐量。 为了解决这样的问题，提出了 <code>Airtime Fairness</code> ，主要
思想是时间分配均等，而不是竞争机会均等, 这样保证了高速率的设备
能够较快地完成数据传输，不会受到低速率设备的影响。
</p>
</div>
</div>
</div>


<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">Ch9 802.11 MAC Architecture</h2>
<div class="outline-text-2" id="text-8">
</div><div id="outline-container-sec-8-1" class="outline-3">
<h3 id="sec-8-1">Data-Link Layer</h3>
<div class="outline-text-3" id="text-8-1">
<p>
802.11数据链路层分为两个子层：
</p>
<ol class="org-ol">
<li>Upper Layer： Logical Link Control (LLC)， 对所有的基于802的网
络都是相同的。
</li>
<li>Lower Layer： Media Access Control (MAC) ， 802.11规范主要定义
在MAC子层的操作。
</li>
</ol>
</div>

<div id="outline-container-sec-8-1-1" class="outline-4">
<h4 id="sec-8-1-1">MAC Service Data Unit</h4>
<div class="outline-text-4" id="text-8-1-1">
<p>
MSDU数据包含来自LLC以及Layer3-7层的数据，即MSDU负载包含IP包和一
些LLC数据。
</p>

<p>
802.11控制帧和管理帧不携带上层信息，只有数据帧才携带MSDU负载。
</p>

<p>
MSDU负载的最大值为：2,304字节。
</p>
</div>
</div>

<div id="outline-container-sec-8-1-2" class="outline-4">
<h4 id="sec-8-1-2">MAC Protocol Data Unit</h4>
<div class="outline-text-4" id="text-8-1-2">
<p>
组成部分如下图所示 ，其中Frame Body可能被加密。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120101.png" alt="2015120101.png" />
</p>
<p><span class="figure-number">Figure 6:</span> 802.11 MPDU</p>
</div>
</div>
</div>
</div>


<div id="outline-container-sec-8-2" class="outline-3">
<h3 id="sec-8-2">Physical Layer</h3>
<div class="outline-text-3" id="text-8-2">
<p>
物理层也分为两个子层：
</p>
<ol class="org-ol">
<li>Upper Layer： Physical Layer Convergence Procedure (PLCP)

<p>
PLCP会MAC子层的帧打包成PLCP协议数据单元准备传输。
</p>
</li>

<li>Lower Layer： Physical Medium Dependent (PMD)

<p>
PMD子层进行调制并将数据按比特位进行传输。
</p>
</li>
</ol>
</div>

<div id="outline-container-sec-8-2-1" class="outline-4">
<h4 id="sec-8-2-1">PLCP Service Data Unit</h4>
<div class="outline-text-4" id="text-8-2-1">
<p>
PSDU是MPDU物理层的视角，它们仅仅是相同数据在不同OSI层上的展现。
</p>
</div>
</div>

<div id="outline-container-sec-8-2-2" class="outline-4">
<h4 id="sec-8-2-2">PLCP Protocol Data Unit</h4>
<div class="outline-text-4" id="text-8-2-2">
<p>
当PLCP接收到PSDU，会进行传输前的准备， 并创建PPDU。 PLCP会为
PSDU增加一段前导码和PHY头部信息。前导码的作用主要是为了发送方与
接收方之间的同步。当PPDU创建后，PMD子层会将PPDU数据调制成比特位
传输出去。
</p>

<p>
数据链路层到物理层流通的过程：
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120102.png" alt="2015120102.png" />
</p>
<p><span class="figure-number">Figure 7:</span> Data-Link and Physical layers</p>
</div>
</div>
</div>
</div>

<div id="outline-container-sec-8-3" class="outline-3">
<h3 id="sec-8-3">802.11 and 802.3 Interoperability</h3>
<div class="outline-text-3" id="text-8-3">
<p>
802.11标准定义Integration Service（IS）可以使MSDU在DS与非802.11
LAN之间通过Portal进行传输，其中Portal通常是一个AP或者WLAN控制器。
用更简单的话说，IS是一种帧格式的传输方式。
</p>

<p>
IS的主要任务是： 
</p>

<ol class="org-ol">
<li>去除802.11帧的头部和尾部。
</li>
<li>将MSDU的负载放到802.3以太网帧的内部。
</li>
</ol>

<p>
通常IS将帧在802.11和802.3媒介之间传输。当然，也可以将MSDU在
802.11与其他类型的媒介之间进行传输，如手机数据网。
</p>
</div>
</div>

<div id="outline-container-sec-8-4" class="outline-3">
<h3 id="sec-8-4">Three 802.11 Frame Types</h3>
<div class="outline-text-3" id="text-8-4">
<p>
总共有三种类型的帧：管理帧，　控制帧和数据帧。
</p>
</div>

<div id="outline-container-sec-8-4-1" class="outline-4">
<h4 id="sec-8-4-1">Management Frames</h4>
<div class="outline-text-4" id="text-8-4-1">
<p>
　管理帧又称为 <i>Management MAC Protocol Data Unit (MMPDU)</i> 。 管理
帧并不携带上层的信息，它只携带Layer2的IE。 802.11总共定义了14种管
理帧：
</p>

<ul class="org-ul">
<li>ssociation request
</li>
<li>ciation response
</li>
<li>sociation request
</li>
<li>Reassociation response
</li>
<li>Probe request
</li>
<li>Probe response
</li>
<li>Beacon
</li>
<li>Announcement traffic indication message (ATIM)
</li>
<li>Disassociation
</li>
<li>Authentication
</li>
<li>Deauthentication
</li>
<li>Action
</li>
<li>Action No ACK
</li>
<li>Timing advertisement
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8-4-2" class="outline-4">
<h4 id="sec-8-4-2">Control Frames</h4>
<div class="outline-text-4" id="text-8-4-2">
<p>
控制帧主要是辅助数据帧的传输。主要用于清空信道，获取信道以及提供
单播帧的确认。它们只包含头部信息。
</p>

<p>
下面是802.11定义的9种控制帧：
</p>

<ul class="org-ul">
<li>Power Save Poll (PS-Poll)
</li>
<li>Request to send (RTS)
</li>
<li>Clear to send (CTS)
</li>
<li>Acknowledgment (ACK)
</li>
<li>Contention Free-End (CF-End) [PCF Only]
</li>
<li>CF-End + CF-ACK [PCF Only]
</li>
<li>Block ACK Request (BlockAckReq) [HCF Only]
</li>
<li>Block ACK (BlockAck) [HCF Only]
</li>
<li>Control wrapper
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-8-4-3" class="outline-4">
<h4 id="sec-8-4-3">Data Frames</h4>
<div class="outline-text-4" id="text-8-4-3">
<p>
数据帧是实际从上层协议传送下来的数据， Layer3~7 MSDU负载通常被
加密。 802.11定义了15种数据帧：
</p>

<ul class="org-ul">
<li>Data (simple data frame)
</li>
<li>Null function (no data)
</li>
<li>Data + CF-ACK [PCF only]
</li>
<li>Data + CF-Poll [PCF only]
</li>
<li>Data + CF-ACK + CF-Poll [PCF only]
</li>
<li>CF-ACK (no data) [PCF only]
</li>
<li>CF-Poll (no data) [PCF only]
</li>
<li>CF-ACK + CF-Poll (no data) [PCF only]
</li>
<li>QoS Data [HCF]
</li>
<li>QoS Null (no data) [HCF]
</li>
<li>QoS Data + CF-ACK [HCF]
</li>
<li>QoS Data + CF-Poll [HCF]
</li>
<li>Qos Data + CF-ACK + CF-Poll [HCF]
</li>
<li>QoS CF-Poll (no data) [HCF]
</li>
<li>QoS CF-ACK + CF-Poll (no data) [HCF]
</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-sec-8-5" class="outline-3">
<h3 id="sec-8-5">Beacon Management Frame</h3>
<div class="outline-text-3" id="text-8-5">
<p>
Beacon管理帧是最重要的一种帧，它是无线网络的心跳。 一个BSS中的AP
会发送Beacon帧，STA则监听Beacon帧。 每个Beacon帧带有时间戳信息，
可用于STA与AP之间的同步， Beacon帧的主要信息如下图所示：
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120103.png" alt="2015120103.png" />
</p>
<p><span class="figure-number">Figure 8:</span> Beacon frame contents</p>
</div>
</div>

<ul class="org-ul"><li><a id="sec-8-5-0-1" name="sec-8-5-0-1"></a>Passive Scanning<br  /><div class="outline-text-5" id="text-8-5-0-1">
<p>
在被动扫描中，STA监听从AP发送过来的Beacon帧。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120104.png" alt="2015120104.png" />
</p>
<p><span class="figure-number">Figure 9:</span> Passive scanning</p>
</div>

<p>
STA主动发送Probe Request请求，然后监控AP的Probe Response帧。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120105.png" alt="2015120105.png" />
</p>
<p><span class="figure-number">Figure 10:</span> Active scanning</p>
</div>
</div>
</li></ul>
</div>

<div id="outline-container-sec-8-6" class="outline-3">
<h3 id="sec-8-6">Authentication</h3>
<div class="outline-text-3" id="text-8-6">
<p>
802.11下的Authentication相当于“插上网线”的步骤， 主要是认证双方
是否合法的802.11设备，仅此而已。
</p>

<p>
802.11定义了两种不同的认证方式：
</p>
<ol class="org-ol">
<li>Open System Authentication (not used any more)
</li>
<li>Shared Key Authentication (used for backward compatibility)
</li>
</ol>
</div>

<ul class="org-ul"><li><a id="sec-8-6-0-1" name="sec-8-6-0-1"></a>Open System Authentication<br  /><div class="outline-text-5" id="text-8-6-0-1">
<p>
It is essentially an exchange of hellos between the client and
the AP。 
</p>
</div>
</li>

<li><a id="sec-8-6-0-2" name="sec-8-6-0-2"></a>Shared Key Authentication<br  /><div class="outline-text-5" id="text-8-6-0-2">
<p>
Steps:
</p>

<ol class="org-ol">
<li>The client station sends an authentication request to the AP.
</li>
<li>The AP sends a cleartext challenge to the client station in
an authentication response.
</li>
<li>The client station then encrypts the cleartext challenge and
sends it back to the AP in the body of another
authentication request frame.
</li>
<li>The AP then decrypts the station’s response and compares it
to the challenge text. If they match, the AP will respond by
sending a fourth and final authentication frame the station,
confirming the success. If they do not match, the AP will
respond negatively. If the AP cannot decrypt the challenge,
it will also respond negatively.
</li>
</ol>

<p>
如果认证成功，则相同的Static WEP key也会被用于加密数据帧。
</p>

<p>
这种方式有缺陷， 更安全的方案是PSK和802.1X/EAP。
</p>
</div>
</li></ul>
</div>

<div id="outline-container-sec-8-7" class="outline-3">
<h3 id="sec-8-7">Association</h3>
<div class="outline-text-3" id="text-8-7">
<p>
当STA与AP进行完Auth交互后，下一步就是与AP关联。当一个STA与AP关联
后，它就成为了一个BSS中的成员。这样STA就可以通过AP将数据发送到DS
媒介。
</p>

<p>
STA通过发送Assocation Request来请求加入一个BSS， AP通过发送
Association Response给STA，拒绝或同意STA的加入。
</p>
</div>

<div id="outline-container-sec-8-7-1" class="outline-4">
<h4 id="sec-8-7-1">Authentication and Association States</h4>
<div class="outline-text-4" id="text-8-7-1">

<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120201.png" alt="2015120201.png" />
</p>
<p><span class="figure-number">Figure 11:</span> Authentication and association states</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-7-2" class="outline-4">
<h4 id="sec-8-7-2">Basic and Supported Rates</h4>
<div class="outline-text-4" id="text-8-7-2">
<p>
AP可以设置 <code>基本速率集</code> 和 <code>可支持的速率集</code> 。 每个与AP关联的STA必
须表明它支持AP的 <code>基本速率集</code> ，否则就会被AP拒绝关联。 而 <code>可支
      持的速率集</code>  是AP建议的一些速率，STA可以不支持。 
</p>

<p>
HR-DSSS (802.11b)支持的速率集为：1, 2, 5.5, and 11 Mbps  
</p>

<p>
ERP (802.11g)支持的速率集为： 1, 2, 5.5, 6, 9, 12, 18, 24, 36,
48和54 Mbps。 
</p>
</div>
</div>

<div id="outline-container-sec-8-7-3" class="outline-4">
<h4 id="sec-8-7-3">Roaming</h4>
<div class="outline-text-4" id="text-8-7-3">
<p>
漫游：在保持上层连接不中断的情况下，STA从一个AP转到另一个AP所在
的BSS中。
</p>

<p>
漫游的决定是由STA来决定。一个STA可以同时与多个AP进行Auth交互，但
是只能与其中一个AP关联。 
</p>

<p>
当漫游发生后，旧AP与新AP之间也需要通过DS媒介来交互一些信息，即新
AP要通知旧的AP之前与之关联的STA，要转发一些发往STA的数据给新的AP。
行一些清理动作， 将之前为之缓存的数据发给新的AP。
</p>
</div>
</div>

<div id="outline-container-sec-8-7-4" class="outline-4">
<h4 id="sec-8-7-4">Reassociation</h4>
<div class="outline-text-4" id="text-8-7-4">
<p>
当一个STA发生漫游后，就会发送Reassociation Request给新的AP，
Reassociation是指重新关联到无线网络的SSID，而不是指重新关联到某
个AP。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120203.png" alt="2015120203.png" />
</p>
<p><span class="figure-number">Figure 12:</span> Reassociation process</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-7-5" class="outline-4">
<h4 id="sec-8-7-5">Disassociation</h4>
<div class="outline-text-4" id="text-8-7-5">
<p>
Disassociation是一个通知，并不是请求，通信双方必须接收，不能拒绝。
AP和STA都可以发送。
</p>
</div>
</div>

<div id="outline-container-sec-8-7-6" class="outline-4">
<h4 id="sec-8-7-6">Deauthentication</h4>
<div class="outline-text-4" id="text-8-7-6">
<p>
Deauthentication也是一个通知，通信双方必须接收，不能拒绝，AP和
STA都可以发送。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-8" class="outline-3">
<h3 id="sec-8-8">ACK Frame</h3>
<div class="outline-text-3" id="text-8-8">
<p>
ACK帧是802.11 CSMA/CA机制的一个核心组件，每个单播帧都必须通过ACK
帧来确认发送是否成功。ACK帧主要用于发送过程的确认动作。 
</p>
</div>
</div>

<div id="outline-container-sec-8-9" class="outline-3">
<h3 id="sec-8-9">Fragmentation</h3>
<div class="outline-text-3" id="text-8-9">
<p>
802.11支持帧分片， 分片是将一个大的帧分成较小的帧，这些较小的帧也
是一个个802.11帧，都包含MAC Header信息，可以单独传输，并需要ACK确
认。
</p>

<p>
传输过程使用SIFS。在网络环境比较好的情况下，数据帧分片会降低网络
吞吐量，因为增加了网络传输的开销。但是，在网络环境比较差的情况下，
数据传输错误率较高的情况下，数据帧分片则会改善网络吞吐量。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120204.png" alt="2015120204.png" />
</p>
<p><span class="figure-number">Figure 13:</span> Frame fragmentation</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-10" class="outline-3">
<h3 id="sec-8-10">Protection Mechanism</h3>
<div class="outline-text-3" id="text-8-10">
<p>
在同一个BSS中存在802.11b  802.11g 或者802.11n, 802.11ac设备时，支
持更高速率的设备会启用保护机制。
</p>
</div>

<div id="outline-container-sec-8-10-1" class="outline-4">
<h4 id="sec-8-10-1">RTS/CTS</h4>
<div class="outline-text-4" id="text-8-10-1">
<p>
Request to send/clear to send (RTS/CTS) is a mechanism that
performs a NAV distribution and helps prevent collisions from
occurring.
</p>

<p>
RTS/CTS都会使监听它们的工作站更新NAV的值。
</p>

<p>
RTS/CTS主要用于两种情况：
</p>

<ol class="org-ol">
<li>隐藏结点。
</li>
<li>当一个BSS中同时存在802.11b/g/n设备。
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-8-10-2" class="outline-4">
<h4 id="sec-8-10-2">CTS-to-Self</h4>
<div class="outline-text-4" id="text-8-10-2">
<p>
CTS-to-Self is used strictly as a protection mechanism for
mixed-mode environments. One of the benefits of using
CTS-to-Self over RTS/CTS as a protection mechanism is that the
throughput will be higher because fewer frames are being sent.
</p>

<p>
想比RTS/CTS，开销要小点。一般AP会使用CTS-to-Self作为保护机制。
STA也可以选择CTS-to-Self作为保护机制。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-8-11" class="outline-3">
<h3 id="sec-8-11">Data Frames</h3>
<div class="outline-text-3" id="text-8-11">
<p>
空数据帧一般用于通知AP当前STA处于省电状态。
</p>
</div>
</div>

<div id="outline-container-sec-8-12" class="outline-3">
<h3 id="sec-8-12">Power Management</h3>
<div class="outline-text-3" id="text-8-12">
</div><div id="outline-container-sec-8-12-1" class="outline-4">
<h4 id="sec-8-12-1">Active Mode</h4>
<div class="outline-text-4" id="text-8-12-1">
<p>
处于非省电状态，对于直接接电源的STA，应该配置为Active Mode。
</p>
</div>
</div>

<div id="outline-container-sec-8-12-2" class="outline-4">
<h4 id="sec-8-12-2">Power Save Mode</h4>
<div class="outline-text-4" id="text-8-12-2">
<p>
当STA处于省电状态时，应该将Power Management位置为1. 
</p>
</div>
</div>

<div id="outline-container-sec-8-12-3" class="outline-4">
<h4 id="sec-8-12-3">Traffic Indication Map</h4>
<div class="outline-text-4" id="text-8-12-3">
<p>
当关联到某个AP的STA进入省电模式时，它会发送一个Null数据帧，这个
帧的Power Management位会被置为1， AP收到后，就知道该STA进入省电
状态，随后就会为它缓存发往该STA的帧。AP通过AID来跟踪该STA。当AP
传递下一个Beacon帧时，会在TIM域中显示该STA是否有缓存帧。TIM域保
存了所有在AP中缓存帧的STA列表，且会一直显示，直到缓存帧全部发送
完成。
</p>

<p>
Beacon帧传送的频率是预知的，这个时间称为 <i>target beacon
transmission time (TBTT)</i> 。 STA知道什么时候Beacon会到来，但是一
般不必醒过来监听每个Beacon帧，可以选择隔几个Beacon帧听一次，这个
时间是由 <i>Listen Interval</i> 来指定的。 
</p>

<p>
当STA听到AP发送过来的Beacon帧，它会Check  TIM域对应的比特位是否
为1， 如果为1，则说明AP会为该STA缓存帧。 STA通过PS-Poll向AP请求
缓存的数据帧。 AP会将缓存帧不停发送给STA直到全部发送完毕。之后，
STA可以继续进入PS状态。
</p>
</div>
</div>


<div id="outline-container-sec-8-12-4" class="outline-4">
<h4 id="sec-8-12-4">Delivery Traffic Indication Message</h4>
<div class="outline-text-4" id="text-8-12-4">
<p>
除了单播数据，网络中也会存在多播数据和广播数据，由于多播和广播
数据是针对所有STA的，BSS需要提供一种方法以确保所有STA都能及时醒
来接收这些帧。 <i>DTIM</i> 用于确保当BSS中有设备发送广播或单播数据时，
所有具备Power Management功能的STA都能及时醒来接收。 DTIM是一种
特别类型的TIM，通过Beacon帧来传递。
</p>

<p>
<code>DTIM Interval</code> 决定了DTIM Beacon传输的频率。为3时，表示每3个
Beacon帧，会传递一次DTIM信息。 每个 TIM会有一个倒数计数器，来指
定下一个DTIM何时到达，当TIM的倒数计数器值为0时，表示当前的TIM是
DTIM。
</p>

<p>
只要BSS中有任何一个STA进入休眠状态，AP都会缓存广播或多播帧。 缓
存的广播或多播帧会使用AID 0保存。 AP会在每次发送DTIM帧后，发送
广播和多播数据（如果有的话）。
</p>
</div>
</div>

<div id="outline-container-sec-8-12-5" class="outline-4">
<h4 id="sec-8-12-5">Announcement Traffic Indication Message</h4>
<div class="outline-text-4" id="text-8-12-5">
<p>
在一个IBSS网络，没有中心的AP。 一个STA进入PS模式时，需要通知其
他的STA自己已经进入PS Mode状态，其他STA会缓存发往该STA的帧。
</p>

<p>
所有的STA都必须周期性地醒来，相互通知是否有STA缓存了发住其他STA
的帧。这个期间，所有STA都必须是Active状态，相互交换的信息的时间
段称为
<i>announcement traffic  indication message (ATIM) window</i> 。在
ATIM Window期间， 只能传输如下的控制帧和管理帧： Beacon, RTS,
CTS, ACK和ATIM帧。  如
果一个STA1缓存了另一个STA2的帧，STA1会发送一个ATIM帧给STA2， 该
ATIM单播帧告诉STA2必须保持活跃状态直到下一个ATIM Window结束，这样它
才能接收缓存的数据。 任何缓存其他STA数据的STA或收到ATIM帧的STA
都必须保持活跃状态，其他的STA则可以进入PS模式。
</p>

<p>
一旦ATIM Window结束，所有未休眠的STA会经历CSMA/CA过程去交换未发
送的数据。 如果某个STA本次无法发送缓存的数据，需要在下一个ATIM
Window再发送一个ATIM帧，然后在ATIM Window结束后，再次经历一个
CSMA/CA过程重新发送数据。 
</p>
</div>
</div>


<div id="outline-container-sec-8-12-6" class="outline-4">
<h4 id="sec-8-12-6">WMM Power Save and U-APSD</h4>
<div class="outline-text-4" id="text-8-12-6">

<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120801.png" alt="2015120801.png" />
</p>
<p><span class="figure-number">Figure 14:</span> Legacy power management</p>
</div>


<p>
WMM-PS uses a trigger mechanism to receive buffered unicast
traffic based on WMM access categories.
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015120802.png" alt="2015120802.png" />
</p>
<p><span class="figure-number">Figure 15:</span> WMM-PS</p>
</div>

<p>
The advantages of this enhanced power-management method include
the following:
</p>

<ol class="org-ol">
<li>Applications now control the power-save behavior by setting
doze periods and sending trigger frames. VoWiFi phones will
obviously send triggers to the AP frequently during voice
calls, whereas a laptop radio using a data application will
have a longer doze period.
</li>

<li>The trigger and delivery method eliminates the need for
PS-Poll frames.
</li>

<li>The client can request to download buffered traffic and does
not have to wait for a beacon frame.
</li>

<li>All the downlink application traffic is sent in a faster
frame burst during the AP’s TXOP.
</li>
</ol>

<p>
使用的前提：
</p>

<ol class="org-ol">
<li>The client is Wi-Fi CERTIFIED for WMM-PS.
</li>
<li>The AP is Wi-Fi CERTIFIED for WMM-PS.
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-8-12-7" class="outline-4">
<h4 id="sec-8-12-7">802.11n Power Management</h4>
<div class="outline-text-4" id="text-8-12-7">
<p>
802.11n定义了两个新的Power-Management方法：
</p>

<ol class="org-ol">
<li>spatial multiplexing power save (SM power save).

<p>
The purpose of SM power save is to enable a MIMO 802.11n
device to power down all but one of its radio chains.
</p>
</li>

<li>power save multi-poll (PSMP)

<p>
defined for use for HT (802.11n) radios。 
</p>
</li>
</ol>
</div>
</div>
</div>
</div>








<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">Ch10 WLAN Architecture</h2>
</div>

<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">Ch11 WLAN Deployment and Vertical Markets</h2>
</div>

<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11">Ch12 WLAN Troubleshooting and Design</h2>
</div>

<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12">Ch13 802.11 Network Security Arch itecture</h2>
<div class="outline-text-2" id="text-12">
</div><div id="outline-container-sec-12-1" class="outline-3">
<h3 id="sec-12-1">802.11 security basics</h3>
<div class="outline-text-3" id="text-12-1">
<p>
802.11无线网络安全主要包含如下5个要素：
</p>
<ol class="org-ol">
<li>Data privacy and integrity
</li>
<li>Authentication, authorization, and accounting (AAA)
</li>
<li>Segmentation
</li>
<li>Monitoring
</li>
<li>Policy
</li>
</ol>
</div>

<div id="outline-container-sec-12-1-1" class="outline-4">
<h4 id="sec-12-1-1">Data privacy and integrity</h4>
<div class="outline-text-4" id="text-12-1-1">
<p>
基于WLAN网络的开放性特点，为了保护数据私密性，必须对数据进行加密。
主要有加密方式：
</p>
<ol class="org-ol">
<li>WEP
使用RC算法
</li>
<li>TKIP
使用RC算法
</li>
<li>CCMP
使用AES算法
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-12-1-2" class="outline-4">
<h4 id="sec-12-1-2">Authentication, authorization, and accounting (AAA)</h4>
<div class="outline-text-4" id="text-12-1-2">
<ul class="org-ul">
<li><code>Authentication（认证）</code>
        对身份和私密信息进行验证，如用户名和密码信息。
</li>
<li><code>Authorization（授权）</code>
        决定设备或用户是否有权访问网络资源。必须在认证完成后。
</li>
<li><code>Accounting</code>
        对用户或设备使用网络资源的行为进行跟踪记录。
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-12-1-3" class="outline-4">
<h4 id="sec-12-1-3">Segmentation</h4>
<div class="outline-text-4" id="text-12-1-3">
<p>
对已经授权访问网络资源的用户再次进行一个分组，便于为不同的用户或
设备提供不同安全等级的网络服务。
</p>
</div>
</div>

<div id="outline-container-sec-12-1-4" class="outline-4">
<h4 id="sec-12-1-4">Monitoring and policy</h4>
<div class="outline-text-4" id="text-12-1-4">
<p>
监测网络攻击。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-12-2" class="outline-3">
<h3 id="sec-12-2">Legacy 802.11 security</h3>
<div class="outline-text-3" id="text-12-2">
</div><div id="outline-container-sec-12-2-1" class="outline-4">
<h4 id="sec-12-2-1">Legacy authentication</h4>
<div class="outline-text-4" id="text-12-2-1">
<p>
最初802.11定义了两种认证方法：
</p>
<ol class="org-ol">
<li>开放系统认证
</li>
<li>共享密钥认证
</li>
</ol>

<p>
802.11中提到的 <code>认证</code> ，不是通常认为的对连接到网络上的用户的身份
进行验证，更多的是指对能力的认证，即验证双方都是合法的802.11设备。
</p>
</div>

<ul class="org-ul"><li><a id="sec-12-2-1-1" name="sec-12-2-1-1"></a>Open System authentication<br  /><div class="outline-text-5" id="text-12-2-1-1">
<ol class="org-ol">
<li>The client sends an authentication request.
</li>
<li>The access point then sends an authentication response.
</li>
</ol>
</div>
</li>

<li><a id="sec-12-2-1-2" name="sec-12-2-1-2"></a>Shared Key authentication<br  /><div class="outline-text-5" id="text-12-2-1-2">
<ol class="org-ol">
<li>The client station sent an authentication request to the access point.
</li>
<li>The access point sent a cleartext challenge to the client
station in an authentication response.
</li>
<li>The client station encrypted the cleartext challenge and
sent it back to the access point in the body of another
authentication request frame.
</li>
<li>The access point decrypted the station’s response and
compared it to the challenge text:
<ul class="org-ul">
<li>If they matched, the access point would respond by sending
a fourth and final authentication frame to the station
confirming the success.
</li>
<li>If they did not match, the access point would respond
negatively. If the access point could not decrypt the
challenge, it would also respond negatively.
</li>
</ul>
</li>
</ol>

<p>
Shared Key认证过程看起来比Open system认证过程要安全些，但是实际
上，一旦截获认证过程中加密明文的Shared Key，则之后所有的数据帧
都会被解密。所有Shared Key认证方式已经被废除，不建议使用了。目
前，最新的标准建议使用更安全的认证方法： <code>802.1X/EAP</code> 。
</p>
</div>
</li></ul>
</div>

<div id="outline-container-sec-12-2-2" class="outline-4">
<h4 id="sec-12-2-2">Static WEP encryption</h4>
<div class="outline-text-4" id="text-12-2-2">
<p>
有线等效加密是Layer-2层的加密方法，使用RC4作为流加密器。最初的
802.11标准只定义了64-位的WEP作为可支持的加密方法，之后，128-位的
WEP也被定义为一种可支持的加密方法。WEP的三个目标如下：
</p>
<ol class="org-ol">
<li>Confidentiality（机密性）
在数据传输前，进行加密。
</li>
<li>Access Control（访问控制）
STA必须与AP拥有相同 的WEP Key。
</li>
<li>Data Integrity（数据完整性）
在加密前，会对数据计算一个ICV（integrity check value）值，以
防止数据被修改。
</li>
</ol>

<p>
64-位的WEP使用一个40-位的静态密钥，再加上 一个由驱动选择的24-位
的数字组成。 该24-位的数字，称为 <i>initialization vector (IV)</i> 。
是明文发送的，并且每帧发送时，这个IV值不一样。 不过，这个IV值的
空间只有6,777,216个不同的值，所以会出现重复使用IV这个值的情况。
128-位WEP加密使用104-位静态密钥加上一个24-位的IV。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121001.png" alt="2015121001.png" />
</p>
<p><span class="figure-number">Figure 16:</span> Static WEP encryption key and initialization vector</p>
</div>

<p>
<code>WEP的工作过程</code>
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121002.png" alt="2015121002.png" />
</p>
<p><span class="figure-number">Figure 17:</span> WEP encryption process</p>
</div>

<ol class="org-ol">
<li>WEP runs a cyclic redundancy check (CRC) on the plaintext
data that is to be encrypted and then appends the integrity
check value (ICV) to the end of the plaintext data.
</li>
<li>A 24-bit cleartext initialization vector (IV) is then
generated and combined with the static secret key.
</li>
<li>WEP then uses both the static key and the IV as seeding
material through a pseudorandom algorithm that generates
random bits of data known as a keystream. 
These pseudorandom bits are equal in length to the plaintext
data that is to be encrypted.
</li>
<li>The pseudorandom bits in the keystream are then combined with
the plaintext data bits by using a Boolean XOR process.
The end result is the WEP ciphertext, which is the encrypted
data.
</li>
<li>The encrypted data is then prefixed with the cleartext IV.
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-12-2-3" class="outline-4">
<h4 id="sec-12-2-3">MAC filters</h4>
<div class="outline-text-4" id="text-12-2-3">
<p>
由于MAC地址的唯一性特点，可以通过MAC地址过滤来限制设备是否允许关
联当前AP等等，具体过滤规则802.11规范中并没有说明，与具体厂商实现
有关。
</p>
</div>
</div>

<div id="outline-container-sec-12-2-4" class="outline-4">
<h4 id="sec-12-2-4">SSID cloaking(隐藏SSID)</h4>
<div class="outline-text-4" id="text-12-2-4">
<p>
当AP设置了禁止广播SSID后，它发出的Beacon帧中SSID字段就是空的，这
样，STA不能通过被动扫描的方式发现设备。主设备进行主动扫描，即使
发出一个Null Probe Request，AP虽然会回一个Probe Response，但是它
的SSID值是空的，有些厂商设计的行为可以是直接丢弃这种Null probe
request请求。当然，对于定向的Probe Request，如果SSID指定为当前的
AP设置的SSID，则会被允许进行Association操作。
</p>

<p>
不过，Layer-2层的抓包工具，是可以通过抓包发现AP的隐藏SSID，因为SSID是明
文的。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-12-3" class="outline-3">
<h3 id="sec-12-3">Robust security</h3>
<div class="outline-text-3" id="text-12-3">
<p>
802.11i定义了两种认证方法：
</p>
<ol class="org-ol">
<li>802.1X/EAP authentication
通常用于企业环境
</li>
<li>Preshared Key（PSK） or a passphrase.
通常用于家庭环境或小型办公环境
</li>
</ol>

<p>
CCMP/AES是默认的加密方法，TKIP/RC4是可选的加密方法。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121003.png" alt="2015121003.png" />
</p>
<p><span class="figure-number">Figure 18:</span> Security standards and certifications comparison</p>
</div>
</div>

<div id="outline-container-sec-12-3-1" class="outline-4">
<h4 id="sec-12-3-1">Robust security network (RSN)</h4>
<div class="outline-text-4" id="text-12-3-1">
<p>
802.11标准定义了：
</p>
<ol class="org-ol">
<li>RSN（robust security network）
</li>
<li>RSNA（robust security network associations）
</li>
</ol>

<p>
两个STA必须相互认证并关联，同时通过4-Way握手过程创建动态加密密钥。
两个STA之间的关联过程称之为RSNA。
</p>

<p>
RSN网络只允许创建RSNA。一个网络是否为RSN网络可以从 <i>RSN
Information Element (IE).</i> 域得知，该信息一般携带于Beacon、Probe
Response、Association Request、Reassociation Request帧中。通过这
个信息可以得知每个STA加密套件的能力。
</p>

<p>
Pre-RSN和RSN机制可以同时存在于一个BSS中。
</p>

<p>
A transition security network (TSN) supports RSN-defi ned
security, as well as legacy security such as WEP, within the
same BSS, although most vendors do not support a TSN.
</p>
</div>
</div>

<div id="outline-container-sec-12-3-2" class="outline-4">
<h4 id="sec-12-3-2">Authentication and authorization</h4>
<div class="outline-text-4" id="text-12-3-2">
<p>
Authentication：the verification of user identity and　
credentials.
Authorization involves whether a device or user is granted
access to　network resources and services.
</p>

<p>
在进行Authorization之前，必须通过了Authentication。　
</p>
</div>
</div>

<div id="outline-container-sec-12-3-3" class="outline-4">
<h4 id="sec-12-3-3">PSK authentication</h4>
<div class="outline-text-4" id="text-12-3-3">
<p>
最新的802.11标准定义了认证和密钥管理服务（AKM）. AKM服务同时要求
认证过程和加密密钥的产生和管理。
</p>

<p>
AKMP（authentication and key management protocol (AKMP)）在
802.1X中可以是 PSK也可以是EAP协议。
</p>

<p>
WPA/WPA2-Personal使用PSK认证，而WPA/WPA2-Enterprise使用
802.1X/EAP认证方案。
</p>

<p>
WPA/WPA2-Personal可以让终端用户输入一个ASCII字符串，作为密码，大
小从8到63个字符大小。实际上，在技术背后，存在一个密码映射到PSK这
样的一个过程。
</p>

<p>
Wi-Fi联盟称呼PSK认证的标准名称为：WPA-Personal or WPA2-Personal。
不过，不同厂商还有其他的一些称呼：WPA/WPA2-Passphrase,
WPA/WPA2-PSK, and WPA/WPA2-Preshared Key.
</p>
</div>
</div>

<div id="outline-container-sec-12-3-4" class="outline-4">
<h4 id="sec-12-3-4">Proprietary PSK authentication</h4>
<div class="outline-text-4" id="text-12-3-4">
<p>
专有的PSK认证是由厂家自己定义的方法，以应对字典攻击。标准的PSK
认证方法中，所有的设备拥有相同的PSK，而厂家特有的方法可以允许每
个设备拥有唯一的PSK。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121004.png" alt="2015121004.png" />
</p>
<p><span class="figure-number">Figure 19:</span> Proprietary PSK</p>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-5" class="outline-4">
<h4 id="sec-12-3-5">802.1X/EAP framework</h4>
<div class="outline-text-4" id="text-12-3-5">
<p>
802.11X标准是一种基于端口访问控制的标准。在执行认证过程时，需要
一套协议，EAP就是用于用户认证的协议，它是Layer-2层的认证协议。
</p>

<p>
802.1X/EAP solution requires that both the supplicant and the
authentication server support the same type of EAP. The
authenticator must be configured for 802.1X/EAP authentication
but does not care which EAP type passes through. The
authenticator and the supplicant must support the same type of
encryption.
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121005.png" alt="2015121005.png" />
</p>
<p><span class="figure-number">Figure 20:</span> 802.1X/EAP authentication</p>
</div>
</div>
</div>

<div id="outline-container-sec-12-3-6" class="outline-4">
<h4 id="sec-12-3-6">Dynamic encryption-key generation</h4>
<div class="outline-text-4" id="text-12-3-6">
<p>
尽管802.1X/EAP框架没有要求加密，但是建议进行加密。802.1X/EAP的目
的是认证和授权，它的一个副产物就是动态加密密钥的产生和分发。 
</p>
</div>
</div>

<div id="outline-container-sec-12-3-7" class="outline-4">
<h4 id="sec-12-3-7">4-Way Handshake</h4>
<div class="outline-text-4" id="text-12-3-7">
<p>
对于两个RSN设备，相互之间在建立认证和关联过程的同时，也需要通过
一个4-Way握手过程来产生一个动态加密密钥。
</p>

<p>
RSNA使用了一个动态密钥管理方法，用来创建5个单独的密钥。 其中，包
含GMK(Group Master Key)和PMK(Pairwise Master Key)密钥的创建。PMK
是从802.1X/EAP认证过程中产生的，也可以在PSK认证过程中产生。这些
Master key做为最终密钥产生时所需要的Seeding Material。 最终的加
密密钥称为PTK（Pairwise Transient Key）和GTK（Group Temporal
Key）。PTK用来加密和解密单播数据，GTK用来加密和解密广播和多播数
据。
</p>

<p>
不管使用PSK或是802.1X/EAP，4-Way握手过程一定会发生，并且，当STA
从一个BSS漫游到另一个BSS时，新的4-Way握手过程会产生，以生成新的
加密和解密密钥。
</p>
</div>
</div>

<div id="outline-container-sec-12-3-8" class="outline-4">
<h4 id="sec-12-3-8">WPA/WPA2-Personal</h4>
<div class="outline-text-4" id="text-12-3-8">
<p>
当使用PSK认证时，有一个公式用来将passphase(用户输入的密码或AP设
置的密码)转换成PMK， 用于在4-Way握手过程中产生动态加密解密密钥。
</p>
</div>
</div>

<div id="outline-container-sec-12-3-9" class="outline-4">
<h4 id="sec-12-3-9">TKIP encryption</h4>
<div class="outline-text-4" id="text-12-3-9">
<p>
对WEP加密方法的一个改良，仍然使用RC4算法，
</p>

<p>
802.11n设备不允许使用WEP加密方法，当启用HT或VHT时，也允许使用
TKIP加密方法。
</p>
</div>
</div>

<div id="outline-container-sec-12-3-10" class="outline-4">
<h4 id="sec-12-3-10">CCMP encryption</h4>
<div class="outline-text-4" id="text-12-3-10">
<p>
最新的加密方法，802.11n之后的设备默认使用该加密方法。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-12-4" class="outline-3">
<h3 id="sec-12-4">Traffic segmentation</h3>
<div class="outline-text-3" id="text-12-4">
</div><div id="outline-container-sec-12-4-1" class="outline-4">
<h4 id="sec-12-4-1">VLANs</h4>
<div class="outline-text-4" id="text-12-4-1">
<p>
Virtual local area networks (VLANs) are used to create separate
broadcast domains in a layer 2 network and are often used to
restrict access to network resources without regard to physical
topology of the network.
</p>

<p>
a WLAN environment, individual SSIDs can be mapped to individual
VLANs, and users can be segmented by the SSID/VLAN pair, all
while communicating through a single access point.
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121006.png" alt="2015121006.png" />
</p>
<p><span class="figure-number">Figure 21:</span> Wireless VLANs</p>
</div>
</div>
</div>

<div id="outline-container-sec-12-4-2" class="outline-4">
<h4 id="sec-12-4-2">RBAC</h4>
<div class="outline-text-4" id="text-12-4-2">
<p>
Role-based access control (RBAC) is another approach to
restricting system access to authorized users.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-12-5" class="outline-3">
<h3 id="sec-12-5">Infrastructure security</h3>
<div class="outline-text-3" id="text-12-5">
</div><div id="outline-container-sec-12-5-1" class="outline-4">
<h4 id="sec-12-5-1">Physical security</h4>
</div>

<div id="outline-container-sec-12-5-2" class="outline-4">
<h4 id="sec-12-5-2">Interface security</h4>
</div>
</div>

<div id="outline-container-sec-12-6" class="outline-3">
<h3 id="sec-12-6">VPN wireless security</h3>
<div class="outline-text-3" id="text-12-6">
</div><div id="outline-container-sec-12-6-1" class="outline-4">
<h4 id="sec-12-6-1">Layer 3 VPNs</h4>
</div>

<div id="outline-container-sec-12-6-2" class="outline-4">
<h4 id="sec-12-6-2">SSL VPN</h4>
</div>

<div id="outline-container-sec-12-6-3" class="outline-4">
<h4 id="sec-12-6-3">VPN deployment</h4>
</div>

<div id="outline-container-sec-12-6-4" class="outline-4">
<h4 id="sec-12-6-4">Guest WLAN security</h4>
</div>

<div id="outline-container-sec-12-6-5" class="outline-4">
<h4 id="sec-12-6-5">Captive portal</h4>
</div>
</div>
</div>




<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13">Ch14 Wireless Attacks, Intrusion Monitoring, and Policy</h2>
</div>

<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14">Ch15 Radio Frequency Site Survey Fundamentals</h2>
</div>

<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15">Ch16 Site Survey Systems and Devices</h2>
</div>

<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16">Ch17 Power over Ethernet(PoE)</h2>
</div>

<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17">Ch18 802.11n</h2>
<div class="outline-text-2" id="text-17">
</div><div id="outline-container-sec-17-1" class="outline-3">
<h3 id="sec-17-1">802.11n-2009 amendment</h3>
<div class="outline-text-3" id="text-17-1">
<p>
802.11n-2009定义了HT， 无线通信可以结合MIMO技术和OFDM技术。 MIMO
技术提高了吞吐量和通信范围。802.11n向后与802.11a/b/g保持兼容。
802.11n可使用在2.4G和5G。
</p>
</div>
</div>

<div id="outline-container-sec-17-2" class="outline-3">
<h3 id="sec-17-2">Wi-Fi Alliance certification</h3>
<div class="outline-text-3" id="text-17-2">
<p>
Wi-Fi联盟针对802.11n有一个厂商认证项目称为WiFi CERTIFIED n。
802.11n的产品必须通过一些强制测试项和可选项。所有认证过的802.11n
设备必须支持Wi-Fi多媒体的QoS机制和WPA/WPA2的安全机制。
</p>
</div>
</div>

<div id="outline-container-sec-17-3" class="outline-3">
<h3 id="sec-17-3">MIMO</h3>
<div class="outline-text-3" id="text-17-3">
<p>
MIMO是支持802.11n物理层的核心和灵魂。对于传统的802.11设备，多径是
一个会导致信号衰减或数据破坏的问题，但是，对于802.11n设备，多径效
应却是一个可利用的现象，802.11n就是充分利用多径效应来提高网络吞吐
量的。
</p>

<p>
MIMO信号发射端发射的信息会通过多条路径到达MIMO信号接收端，MIMO信
号接收端会使用高级的DSP技术挑选出原始的传输信号。
</p>

<p>
通过使用SM（spatial multiplexing）方法传输多个数据流，可以利用多
径提供更好的吞吐量。MIMO系统也可以同时使用多条天线来提供更好的传
输和接收差异， 这可以增大传输范围和可靠性。
</p>

<p>
有许多传输和接收差异的技术：
</p>
<ol class="org-ol">
<li>Space-time block coding (STBC) and cyclic shift diversity
(CSD) are transmit diversity techniques where the same
transmit data is sent out of multiple antennas.
STBC技术只能用于802.11n设备之间，而CSD技术可以用于802.11n设备
和其他类型的设备。
</li>
<li>Transmit beamforming (TxBF) is a technique where the same
signal is transmitted over multiple antennas and the antennas
act like a phased array.
</li>
<li>Maximal ratio combining (MRC) is a type of receive diversity
technique where multiple received signals are combined, thus
improving sensitivity.
</li>
</ol>

<p>
空间利用和差异化技术是利用多径的重要技术。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121101.png" alt="2015121101.png" />
</p>
<p><span class="figure-number">Figure 22:</span> MIMO operation and multipath</p>
</div>
</div>

<div id="outline-container-sec-17-3-1" class="outline-4">
<h4 id="sec-17-3-1">Radio chains</h4>
<div class="outline-text-4" id="text-17-3-1">
<p>
A radio chain is defi ned as a single radio and all of its
supporting architecture, including mixers, amplifi ers, and
analog/digital converters.
</p>

<p>
一个MIMO系统包含多个Radio Chain，每个Radio Chain都有自己的天线。
一个MIMO系统是以发送端和接收端使用的Radio Chain为特征的。一个
2X3MIMO系统代表有三个Radio Chain由2个发送端和3个接收端使用。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121102.png" alt="2015121102.png" />
</p>
<p><span class="figure-number">Figure 23:</span> 2×3 and 3×3 MIMO</p>
</div>
</div>
</div>

<div id="outline-container-sec-17-3-2" class="outline-4">
<h4 id="sec-17-3-2">Spatial multiplexing (SM)</h4>
<div class="outline-text-4" id="text-17-3-2">
<p>
A MIMO radio also has the ability to send independent unique
data streams. Each independent data stream is known as a
<code>spatial stream</code>. 每个单独的Spatial Stream包含的数据可以跟其他的
Radio Chain传送的数据不一样。 
</p>

<p>
Each stream will also travel a different path, because there is
at least a half-wavelength of space between the multiple
transmitting antennas. The fact that the multiple streams follow
different paths to the receiver because of the space between the
transmitting antennas is known as <i>spatial diversity</i>.
</p>

<p>
Sending multiple independent streams of unique data using
spatial diversity is often also referred to as spatial
multiplexing (SM) or spatial diversity multiplexing (SDM).
</p>

<p>
描述MIMO能力的格式： 3×3:2
第一个数字代表TX数量，第二个数字代表RX数量，第三个代表发送或
接收的唯一的数据流数量。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121103.png" alt="2015121103.png" />
</p>
<p><span class="figure-number">Figure 24:</span> Multiple spatial streams</p>
</div>

<p>
当一个STA加入一个BSS时，STA会将MIMO能力信息告知给AP。
</p>
</div>
</div>

<div id="outline-container-sec-17-3-3" class="outline-4">
<h4 id="sec-17-3-3">MIMO diversity</h4>
<div class="outline-text-4" id="text-17-3-3">
<p>
Antenna diversity (both receive and transmit) is a method of
using multiple antennas to survive the negative effects of
multipath.
</p>

<p>
接收端从收到的信号中，提取信号最强的。使用多根天线增加了信号被接
收到的概率，从而降低数据破坏的概率，实际效果是信号传输距离变长了。
</p>
</div>
</div>

<div id="outline-container-sec-17-3-4" class="outline-4">
<h4 id="sec-17-3-4">Space-time block coding (STBC)</h4>
<div class="outline-text-4" id="text-17-3-4">
<p>
Space-time block coding (STBC) is a method where the same
information is transmitted on two or more antennas. It is a
type of transmit diversity.
</p>

<p>
当天线数量超过spatial streams数量时，可以使用STBC。STBC并不能增
加数据传输速率，但是可以增强接收端在SNR较小的时候可以检测到信号。
无线信号系统的接收灵敏度增强了。STBC主要用于802.11n设备之间的数
据传输。
</p>
</div>
</div>

<div id="outline-container-sec-17-3-5" class="outline-4">
<h4 id="sec-17-3-5">Cyclic shift diversity (CSD)</h4>
<div class="outline-text-4" id="text-17-3-5">
<p>
另一种比较重要的Transmit Diversity技术，可以用于802.11n设备与传
统802.11设备之间的数据传输。
</p>
</div>
</div>

<div id="outline-container-sec-17-3-6" class="outline-4">
<h4 id="sec-17-3-6">Transmit beamforming (TxBF)</h4>
<div class="outline-text-4" id="text-17-3-6">
<p>
802.11n标准中定义的一种可选的物理层能力。Transmit beamforming
can be used when there are more transmitting antennas than
there are spatial data streams.
</p>

<p>
接收端通过调整信号的相位，得到一个较高振幅的信号，提高了SNR，增
大了数据传输距离。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-17-4" class="outline-3">
<h3 id="sec-17-4">HT channels</h3>
<div class="outline-text-3" id="text-17-4">
</div><div id="outline-container-sec-17-4-1" class="outline-4">
<h4 id="sec-17-4-1">20 MHz non-HT and HT channels</h4>
<div class="outline-text-4" id="text-17-4-1">
<p>
802.11n (HT) radios also use the same OFDM technology and have
the capability of using either 20 MHz channels or 40 MHz
channels. The 20 MHz channels used by HT radios have four
extra subcarriers and can carry a little more data than a
non-HT OFDM channel.
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121104.png" alt="2015121104.png" />
</p>
<p><span class="figure-number">Figure 25:</span> 20 MHz non-HT (802.11a/g) channel</p>
</div>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121105.png" alt="2015121105.png" />
</p>
<p><span class="figure-number">Figure 26:</span> 20 MHz HT (802.11n) channel</p>
</div>
</div>
</div>

<div id="outline-container-sec-17-4-2" class="outline-4">
<h4 id="sec-17-4-2">40 MHz channels</h4>
<div class="outline-text-4" id="text-17-4-2">

<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121106.png" alt="2015121106.png" />
</p>
<p><span class="figure-number">Figure 27:</span> 40 MHz HT (802.11n) channel</p>
</div>

<p>
40MHz的信道是由两个相邻的20MHz信道合并的，其中一个为主信道，另
一个为辅信道。
</p>
</div>
</div>

<div id="outline-container-sec-17-4-3" class="outline-4">
<h4 id="sec-17-4-3">40 MHz Intolerant</h4>
<div class="outline-text-4" id="text-17-4-3">
<p>
2.4G频段，只有一个不重叠的40 MHz的信道。 一个在2.4G使用40 MHz信道宽
度的AP会影响周围其他的AP，如果该AP运行在2.4G，并使用20 MHz信道
宽度， 如1， 6 ， 11信道。默认情况下，802.11 STA和AP在2.4G频段
传输数据时会使用20 MHz的信道宽度。 它们也可以通过802.11n管理帧
告知周围其他设备它们是 <i>Forty MHz Intolerant</i> 。 当2.4G下使用
40 MHz信道宽度的AP收到这样的管理帧后，会自动切回到20 MHz的信道
宽度。对于运行于5G下的AP，则没有这样的要求。
</p>
</div>
</div>

<div id="outline-container-sec-17-4-4" class="outline-4">
<h4 id="sec-17-4-4">Guard interval (GI)</h4>
<div class="outline-text-4" id="text-17-4-4">
<p>
For digital signals, data is modulated onto the carrier signal
in bits or collections of bits called <i>symbols</i>.
</p>

<p>
802.11a/g radios use an 800-nanosecond guard interval (GI)
between OFDM symbols. The <code>guard interval</code> is a period of time
between symbols that accommodates the late arrival of symbols
over long paths.
</p>

<p>
In a multipath environment, symbols travel different paths, and
therefore some symbols arrive later. A “new” symbol may arrive
at a receiver before a “late” symbol has been completely
received. This is known as <i>intersymbol interference (ISI)</i> and
often results in data corruption.
</p>

<p>
<code>delay spread</code> is the time differential between multiple paths
of the same signal. 通过delay spread的大小为50 ns ~ 100 ns, 最
多不超过200 ns. Guard interval通常是2到4倍delay spread的大小。
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121107.png" alt="2015121107.png" />
</p>
<p><span class="figure-number">Figure 28:</span> Guard interval</p>
</div>

<p>
GI的主要作用是防止 <code>Inter symbol inerference</code>.
</p>
</div>
</div>

<div id="outline-container-sec-17-4-5" class="outline-4">
<h4 id="sec-17-4-5">Modulation and coding scheme (MCS)</h4>
<div class="outline-text-4" id="text-17-4-5">
<p>
802.11n data rates are defined with a modulation and coding
scheme (MCS) matrix.
</p>
</div>
</div>

<div id="outline-container-sec-17-4-6" class="outline-4">
<h4 id="sec-17-4-6">HT PHY</h4>
<div class="outline-text-4" id="text-17-4-6">
<p>
MSDU是Layer3~7层的负载。 MPDU是整个802.11帧的技术名称。当MPDU转
到物理层后，前导码和PHY头部信息加入到MPDU，产生了 <i>Physical
Layer Convergence Procedure Protocol Data Unit (PPDU).</i>
前导码的作用是使用一些比特位同步两个802.11无线信号传输。PHY头部
的主要目的是使用一个Signal域显示要花多长时间去传输802.11帧
（MPDU），并通知接收方当前传输MPDU使用的MCS（速率）。 
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121108.png" alt="2015121108.png" />
</p>
<p><span class="figure-number">Figure 29:</span> 802.11n PPDU formats</p>
</div>
</div>
</div>

<div id="outline-container-sec-17-4-7" class="outline-4">
<h4 id="sec-17-4-7">Non-HT legacy</h4>
<div class="outline-text-4" id="text-17-4-7">
<p>
Support for the non-HT legacy format is mandatory for 802.11n
radios, and transmissions can occur in only 20 MHz channels.
</p>
</div>
</div>

<div id="outline-container-sec-17-4-8" class="outline-4">
<h4 id="sec-17-4-8">HT Mixed</h4>
<div class="outline-text-4" id="text-17-4-8">
<p>
The HT Mixed format is also considered mandatory, and
transmissions can occur in both 20 MHz and 40 MHz channels.
</p>

<p>
When a 40 MHz channel is used, all broadcast traffic must be
sent on a legacy 20 MHz channel so as to maintain
interoperability with the 802.11a/g non-HT clients.
</p>
</div>
</div>

<div id="outline-container-sec-17-4-9" class="outline-4">
<h4 id="sec-17-4-9">HT Greenfield</h4>
<div class="outline-text-4" id="text-17-4-9">
<p>
Greenfield format is optional, and the HT radios can transmit
by using both 20 MHz and 40 MHz channels..
</p>

<p>
这种模式不能兼容802.11a/b/g设备，也没有要求使用保护机制。
</p>
</div>
</div>
</div>

<div id="outline-container-sec-17-5" class="outline-3">
<h3 id="sec-17-5">HT MAC</h3>
<div class="outline-text-3" id="text-17-5">
<p>
针对MAC逻辑链路子层， 也提供了一些机制来增强吞吐量，改进电源管理
功能： 使用帧聚合。 
</p>
</div>

<div id="outline-container-sec-17-5-1" class="outline-4">
<h4 id="sec-17-5-1">A-MSDU</h4>
<div class="outline-text-4" id="text-17-5-1">
<p>
802.11设备传输帧时，使用竞争机制来获取媒介使用权，这样会产生一
些通信开锁，且是无法避免的。 为了降低通信开销，802.11n引入了两
个新的帧聚合方法来帮助降低开销。 
</p>

<p>
第一种方法是： <i>Aggregate MAC Service Data Unit(A-MSDU)</i> 。 
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121109.png" alt="2015121109.png" />
</p>
<p><span class="figure-number">Figure 30:</span> A-MSDU</p>
</div>
</div>
</div>

<div id="outline-container-sec-17-5-2" class="outline-4">
<h4 id="sec-17-5-2">A-MPDU</h4>
<div class="outline-text-4" id="text-17-5-2">
<p>
The second method of frame aggregation is known as <i>Aggregate
MAC Protocol Data Unit (A-MPDU)</i>.
</p>


<div class="figure">
<p><img src="{{site.url}}/images/2015/2015121110.png" alt="2015121110.png" />
</p>
<p><span class="figure-number">Figure 31:</span> A-MPDU</p>
</div>
</div>
</div>

<div id="outline-container-sec-17-5-3" class="outline-4">
<h4 id="sec-17-5-3">Block Acknowledgment</h4>
<div class="outline-text-4" id="text-17-5-3">
<p>
A-MSDU只需要 一个ACK，但是，A-MPDU需要对其中的每个MPDU进行确认，
这是通过 <i>multiple traffi c ID block acknowledgment (MTBA)
frame</i> 来完成的，它实际上是一个A-MPDU的Block ACK帧。 
</p>
</div>
</div>

<div id="outline-container-sec-17-5-4" class="outline-4">
<h4 id="sec-17-5-4">RIFS</h4>
<div class="outline-text-4" id="text-17-5-4">
<p>
802.11n引入了一个更短的帧间间隔 <i>reduced interframe space
(RIFS)</i> 。 
</p>
</div>
</div>

<div id="outline-container-sec-17-5-5" class="outline-4">
<h4 id="sec-17-5-5">HT power management</h4>
<div class="outline-text-4" id="text-17-5-5">
<ol class="org-ol">
<li>spatial multiplexing power save(SM power save)
</li>
<li>Power Save Multi Poll (PSMP)
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-17-6" class="outline-3">
<h3 id="sec-17-6">HT operation</h3>
<div class="outline-text-3" id="text-17-6">
</div><div id="outline-container-sec-17-6-1" class="outline-4">
<h4 id="sec-17-6-1">20/40 channel operation</h4>
<div class="outline-text-4" id="text-17-6-1">
<p>
Several rules apply for the operation of 20 MHz and 40 MHz
stations within the same HT 20/40 basic service set:
</p>

<ul class="org-ul">
<li>The 802.11n access point must declare 20-only or 20/40 support
in the beacon management frame.
</li>

<li>802.11n client stations must declare 20-only or 20/40 in the
association or reassociation frames.
</li>

<li>Client stations must reassociate when switching between
20-only and 20/40 modes.
</li>

<li>If 20/40-capable stations transmit by using a single 20 MHz
channel, they must transmit on the primary channel and not
the secondary channel.
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-17-6-2" class="outline-4">
<h4 id="sec-17-6-2">HT protection modes (0–3)</h4>
<div class="outline-text-4" id="text-17-6-2">
<p>
在Beacon帧中，有一个HT Protection的域，它有4个可能的值0~3. 保护
模式会动态变化，取决于周围的设备或者关联的HT AP。使用的保护机制
主要有：RTS/CTS, CTS-to-Self, Dual-CTS或者其他的保护方法。 
</p>

<p>
4种保护模式：
</p>
<ol class="org-ol">
<li>Mode 0—Greenfield (No Protection) Mode
 This mode is referred to as Greenfield because only HT
radios are in use.
</li>

<li>Mode 1—HT Nonmember Protection Mode
在该模式下，BSS中所有的STA都必须是HT STA.
</li>

<li>Mode 2—HT 20 MHz Protection Mode
 the 20/40-capable HT stations must use protection when
transmitting on a 40 MHz channel in order to prevent the 20
MHz–only HT stations from transmitting at the same time. 
</li>

<li>Mode 3—Non-HT Mixed Mode
 his protection mode is used when one or more non-HT
stations are associated to the HT access point.
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-17-6-3" class="outline-4">
<h4 id="sec-17-6-3">RTS/CTS and CTS-to-self</h4>
</div>
</div>
</div>


<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18">Ch19 Very High Throughput (VHT) and 802.11ac</h2>
</div>

<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19">Bring Your Own Device (BYOD)</h2>
</div>
